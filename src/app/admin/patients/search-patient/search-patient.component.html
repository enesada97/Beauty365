<section class="content">
  <div class="container-fluid">
    <div class="block-header">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <ul class="breadcrumb breadcrumb-style">
            <li class="breadcrumb-item">
              <h4 class="page-title">{{'SearchPatient'|translate}}</h4>
            </li>
            <li class="breadcrumb-item bcrumb-1">
              <a routerLink="/admin/dashboard/main">
                <i class="fas fa-home"></i>{{'Homepage'|translate}}</a
              >
            </li>
            <li class="breadcrumb-item bcrumb-2">
              <a routerLink="/admin/patients/all-patients"
                >{{'Patients'|translate}}</a
              >
            </li>
            <li class="breadcrumb-item active">{{'SearchPatient'|translate}}</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="header">
            <h2><strong>{{'Search'|translate}}</strong> {{'Page'|translate}}</h2>
          </div>
          <div class="body">
            <form class="m-4" [formGroup]="patientForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3">
                    <mat-label>{{'IdentityNumber'|translate}}</mat-label>
                    <input matInput formControlName="identityNumber" />
                    <mat-icon matSuffix>person</mat-icon>
                  </mat-form-field>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3">
                    <mat-label>{{'PhoneNumber'|translate}}</mat-label>
                    <input matInput formControlName="phoneNumber" type="text" />
                    <mat-icon matSuffix>phone</mat-icon>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3">
                    <mat-label>{{'Name'|translate}}</mat-label>
                    <input matInput formControlName="name" />
                    <mat-icon matSuffix>face</mat-icon>
                  </mat-form-field>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3">
                    <mat-label>{{'SurName'|translate}}</mat-label>
                    <input matInput formControlName="surName" type="text" />
                    <mat-icon matSuffix>face</mat-icon>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <button
                    class="mr-3 btn btn-block"
                    mat-raised-button
                    color="primary"
                  >
                  {{'Search'|translate}}
                  </button>
                </div>
              </div>
            </form>
              <div *ngIf="searchedPatients" class="table-responsive">
                <div class="materialTableHeader" style="min-width: auto;">
                  <div class="row">
                    <div class="col-6">
                      <ul class="header-buttons-left ml-0">
                        <li class="dropdown">
                          <h2>
                            <strong>{{'Patients'|translate}}</strong>
                          </h2>
                        </li>
                        <li class="dropdown m-l-20">
                          <label for="search-input"
                            ><i class="material-icons search-icon"
                              >search</i
                            ></label
                          >
                          <input
                            placeholder="{{'Filter'|translate}}"
                            type="text"
                            (keyup)="applyFilter($event.target.value)"
                            class="browser-default search-field"
                            aria-label="Search box"
                          />
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <mat-table
                  #table
                  [dataSource]="dataSource"
                  matSort
                  class="mat-cell"
                >
                  <!-- ID Column -->
                  <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef mat-sort-header
                      >{{'ID'|translate}}</mat-header-cell
                    >
                    <mat-cell *matCellDef="let row">{{ row.id }}</mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header
                      >{{'Name'|translate}}</mat-header-cell
                    >
                    <mat-cell *matCellDef="let row"> {{ row.name }}</mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="surName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header
                      >{{'SurName'|translate}}</mat-header-cell
                    >
                    <mat-cell *matCellDef="let row"> {{ row.surName }}</mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="identityNumber">
                    <mat-header-cell [ngClass]="'tbl-col-width-per-11'" *matHeaderCellDef mat-sort-header
                      >{{'IdentityNumber'|translate}}</mat-header-cell
                    >
                    <mat-cell [ngClass]="'tbl-col-width-per-11'" *matCellDef="let row">
                      {{ row.identityNumber }}</mat-cell
                    >
                  </ng-container>
                  <ng-container matColumnDef="phoneNumber">
                    <mat-header-cell [ngClass]="'tbl-col-width-per-11'" *matHeaderCellDef mat-sort-header
                      >{{'PhoneNumber'|translate}}</mat-header-cell
                    >
                    <mat-cell [ngClass]="'tbl-col-width-per-11'" *matCellDef="let row">
                      {{ row.phoneNumber }}</mat-cell
                    >
                  </ng-container>
                  <!-- actions -->
                  <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef class="pr-0"
                      >{{'Actions'|translate}}</mat-header-cell
                    >
                    <mat-cell *matCellDef="let row; let i = index" class="pr-0">
                      <button mat-icon-button [matMenuTriggerFor]="menu">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <mat-menu #menu="matMenu">
                        <button mat-menu-item [matMenuTriggerFor]="protocolProcesses">
                          <mat-icon>group</mat-icon>
                          <span>{{'ProtocolProcesses'|translate}}</span>
                        </button>
                        <button mat-menu-item [matMenuTriggerFor]="patientProcesses">
                          <mat-icon>face</mat-icon>
                          <span>{{'PatientProcesses'|translate}}</span>
                        </button>
                      </mat-menu>
                      <mat-menu #protocolProcesses="matMenu">
                        <button mat-menu-item
                      *ngIf="checkClaim('CreateProtocolCommand')"
                      (click)="protocolControl(row)">
                        <mat-icon>add</mat-icon>
                        <span>{{'Add'|translate}}</span>
                      </button>
                        <!-- <button mat-menu-item>
                          <mat-icon>remove_red_eye</mat-icon>
                          <span>Görüntüle</span>
                        </button> -->
                      </mat-menu>
                      <mat-menu #patientProcesses="matMenu">
                        <button mat-menu-item
                        *ngIf="checkClaim('UpdatePatientDataCommand')"
                        routerLink="edit-patient/{{row.id}}">
                          <mat-icon>edit</mat-icon>
                          <span>{{'Edit'|translate}}</span>
                        </button>
                        <button mat-menu-item
                        *ngIf="checkClaim('GetPatientDataQuery')"
                        routerLink="/admin/patients/all-patients/patient-detail/{{row.id}}">
                          <mat-icon>description</mat-icon>
                          <span>{{'Detail'|translate}}</span>
                        </button>
                      </mat-menu>
                      <!-- <button
                      mat-icon-button
                      routerLink="edit-patient/{{row.id}}"
                      color="accent"
                      class="btn-tbl-edit"
                    >
                      <mat-icon aria-label="Edit" class="col-white"
                        >edit</mat-icon
                      >
                    </button>
                      <button
                        mat-icon-button
                        routerLink="patient-detail/{{ row.id }}"
                        color="accent"
                        class="btn-tbl-description"
                      >
                        <mat-icon aria-label="Detail" class="col-white"
                          >description</mat-icon
                        >
                      </button>
                      <mat-spinner-button  [options]="spinnerButtonOptions" (btnClick)="addProtocolForPatient(row)">
                      </mat-spinner-button> -->
                    </mat-cell>
                  </ng-container>
                  <mat-header-row
                    *matHeaderRowDef="displayedColumns"
                  ></mat-header-row>
                  <mat-row
                  *matRowDef="let row; columns: displayedColumns"
                >
                </mat-row>
                </mat-table>
                <div
                class="no-results"
                [style.display]="
                  dataSource.data.length == 0 ? '' : 'none'
                "
              >
              <p class="alert alert-danger">{{'NoRecordsFound' |translate}}</p>
              </div>
                <mat-paginator
                #paginator
                [pageIndex]="0"
                [pageSize]="4"
              >
              </mat-paginator>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

</section>
