<section *ngIf="patient" class="content">
  <div class="container-fluid">
    <div class="block-header">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <ul class="breadcrumb breadcrumb-style">
            <li class="breadcrumb-item">
              <h4 class="page-title">Hasta Profili</h4>
            </li>
            <li class="breadcrumb-item bcrumb-1">
              <a routerLink="/admin/dashboard/main">
                <i class="fas fa-home"></i> Anasayfa</a
              >
            </li>
            <li class="breadcrumb-item bcrumb-2">
              <a routerLink="/admin/patients/all-patients">Hastalar</a>
            </li>
            <li class="breadcrumb-item active">
              {{ patient.name | uppercase }} {{ patient.surName | uppercase }}
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="header" style="padding-bottom:0px;padding-top:0px">
            <h2>Sağlık Bildirimleri</h2>
          </div>
          <div class="body" style="padding-bottom:0px;width:100%">
            <div class="row clearfix">
              <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">
                <button style="width: 100%;" (click)="addNote()" mat-flat-button color="primary">Sağlık Bildirimi Ekle <mat-icon>edit</mat-icon></button>
              </div>
              <div *ngFor="let medicalAlert of medicalAlerts,let i = index" class="col-xs-6 col-sm-6 col-md-4 col-lg-3">
                <button style="width: 100%;" (click)="editNote(medicalAlert)" mat-flat-button color="warn">{{medicalAlert.note.slice(0,20)}}...<mat-icon>remove_red_eye</mat-icon></button>
              </div>
            </div>
          </div>
      </div>
    </div>
    </div>
    <div class="row clearfix">

      <div [hidden]="clickToAddNote" class="col-lg-3 col-md-3">
          <div class="card">
            <div class="body">
            <mat-selection-list (selectionChange)="onSelectionChange($event)" #select [multiple]="false">
              <mat-list-option [selected]="true" value="1">
                <div style="display:flex; justify-content:space-between;align-items:center">
                  <div style="display:flex;align-items:center">
                    <mat-icon matListAvatar>person</mat-icon>
                    <div style="display:flex; flex-direction:column">
                      <div>
                        <h6  matLine> Bilgileri</h6>

                      </div>
                    </div>
                  </div>
                  <div>
                  </div>
                </div>
              </mat-list-option>
              <div *ngFor="let item of menuItems;">
                <mat-list-option [value]="item.id" [disableRipple]="true">
                  <div style="display:flex; justify-content:space-between;align-items:center">
                    <div style="display:flex;align-items:center">
                      <mat-icon matListAvatar>{{item.icon}}</mat-icon>
                      <div style="display:flex; flex-direction:column">
                        <div>
                          <h6  matLine> {{item.name}}</h6>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-list-option>
                  <mat-list-option style="padding-left:5px;height:40px !important;" *ngFor="let subItem of item.subItems;" [value]="subItem.id" [disableRipple]="true">
                    <div style="display:flex; justify-content:space-between;align-items:center">
                      <div style="display:flex;align-items:center">
                        <mat-icon style="height:30px !important;" matListAvatar>subdirectory_arrow_right {{subItem.icon}}</mat-icon>
                        <div style="display:flex; flex-direction:column">
                          <div style="padding-left: 25px;">
                            <h6  matLine> {{subItem.name}}</h6>
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-list-option>
              </div>
            </mat-selection-list>
          </div>
        </div>
      </div>
      <div *ngIf="!clickToAddNote;else clickToAddNoteTrue" class="col-lg-9 col-md-9">
          <ng-container [ngSwitch]="select.selectedOptions.selected[0]?.value">
            <ng-container *ngSwitchCase="1">
              <ng-container *ngTemplateOutlet="firstContent"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="2">
              <ng-container *ngTemplateOutlet="secondContent"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="3">
              <ng-container *ngTemplateOutlet="thirdContent"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="4">
              <ng-container *ngTemplateOutlet="fourthContent"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="5">
              <ng-container *ngTemplateOutlet="fifthContent"></ng-container>
            </ng-container>
          </ng-container>
          <ng-template #firstContent>
            <div class="card">
              <mat-tab-group>
                <mat-tab>
                  <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                    İletişim Bilgileri
                  </ng-template>
                  <br />
                  <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="card project_widget">
                      <div class="body">
                        <div class="tab-pane body active" id="about">
                          <div class="row">
                            <div class="col-6">
                              <small class="text-muted">Telefon Numarası: </small>
                              <p>{{ patient.phoneNumber }}</p>
                              <hr />
                              <small class="text-muted">Şehir: </small>
                              <p>{{ patient.city }}</p>
                              <hr />
                              <small class="text-muted">Adres: </small>
                              <p>{{ patient.address }}</p>
                              <hr />
                              <small class="text-muted">Email Adres: </small>
                              <p>{{ patient.eMail }}</p>
                            </div>
                            <div class="col-6">
                              <small class="text-muted">Ülke: </small>
                              <p>{{ patient.country }}</p>
                              <hr />
                              <small class="text-muted">Eyalet: </small>
                              <p>{{ patient.region }}</p>
                              <hr />
                              <small class="text-muted">Uyruk: </small>
                              <p>{{ patient.nationality }}</p>
                            </div>
                          </div>


                        </div>
                      </div>
                    </div>
                  </div>
                </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">description</mat-icon>
                  Hasta Hakkında
                </ng-template>
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="body">
                      <div class="row">
                        <div class="col-md-3 col-6 b-r">
                          <strong>Doğum Tarihi</strong>
                          <br />

                          <p class="text-muted">
                            {{ patient.birthDate | date: "MM/dd/yyyy" }}
                          </p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Cinsiyet</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.gender == true;
                              else elseTemplateGender
                            "
                            class="text-muted"
                          >
                            Erkek
                          </p>
                          <ng-template #elseTemplateGender>
                            <p class="text-muted">Kadın</p>
                          </ng-template>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>T.C Kimlik</strong>
                          <br />
                          <p class="text-muted">
                            {{ patient.identityNumber }}
                          </p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Kan Grubu</strong>
                          <br />
                          <p class="text-muted">{{ patient.bloodGroup }}</p>
                        </div>
                      </div>
                      <hr />
                      <div class="row">
                        <div class="col-md-3 col-6 b-r">
                          <strong>Anne Adı</strong>
                          <br />
                          <p class="text-muted">{{ patient.motherName }}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Baba Adı</strong>
                          <br />
                          <p class="text-muted">{{ patient.fatherName }}</p>
                        </div>

                        <div class="col-md-3 col-6 b-r">
                          <strong>Meslek</strong>
                          <br />
                          <p class="text-muted">{{ patient.job }}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Evlilik Durumu</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.maritalStatus == true;
                              else elseTemplateMarital
                            "
                            class="text-muted"
                          >
                            Evli
                          </p>
                          <ng-template #elseTemplateMarital>
                            <p class="text-muted">Bekar</p>
                          </ng-template>
                        </div>
                      </div>
                      <hr />
                      <div class="row text-center">
                        <div class="col-md-6 col-12 b-r">
                          <strong>GDPR Onayı</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.gdprConfirm == true;
                              else elseTemplateGdpr
                            "
                            class="text-muted"
                          >
                            Evet
                          </p>
                          <ng-template #elseTemplateGdpr>
                            <p class="text-muted">Hayır</p>
                          </ng-template>
                        </div>
                        <div class="col-md-6 col-12 b-r">
                          <strong>Sms Onayı</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.smsConfirm == true;
                              else elseTemplateSms
                            "
                            class="text-muted"
                          >
                            Evet
                          </p>
                          <ng-template #elseTemplateSms>
                            <p class="text-muted">Hayır</p>
                          </ng-template>
                        </div>
                      </div>
                      <br />
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">edit</mat-icon>
                  Hastanın Notu Ve Bağımlılıkları
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>Hastanın Notu Ve Bağımlılıkları</h5>
                    </div>
                    <div class="body">
                      <p *ngIf="patient.note; else noNote">
                        {{ patient.note }}
                      </p>
                      <ng-template #noNote
                        ><div class="alert alert-danger">
                          Hastanın Notu Yok! Eklemek için
                          <a (click)="addNote()"
                            style="color: blue;">tıklayınız</a
                          >
                        </div></ng-template
                      >
                      <hr />
                      <div class="row text-center">
                        <div class="col-md-4 col-8 b-r">
                          <strong>Sigara Kullanımı</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.usingSmoke == true;
                              else elseTemplateSmoke
                            "
                            class="text-muted"
                          >
                            Evet
                          </p>
                          <ng-template #elseTemplateSmoke>
                            <p class="text-muted">Hayır</p>
                          </ng-template>
                        </div>
                        <div class="col-md-4 col-8 b-r">
                          <strong>Alkol Kullanımı</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.usingAlcohol == true;
                              else elseTemplateAlcohol
                            "
                            class="text-muted"
                          >
                            Evet
                          </p>
                          <ng-template #elseTemplateAlcohol>
                            <p class="text-muted">Hayır</p>
                          </ng-template>
                        </div>
                        <div class="col-md-4 col-8 b-r">
                          <strong>Hasta Sorunlu mu?</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.isTrobule == true;
                              else elseTemplateSmoke
                            "
                            class="text-muted"
                          >
                            Evet
                          </p>
                          <ng-template #elseTemplateSmoke>
                            <p class="text-muted">Hayır</p>
                          </ng-template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2"
                    >find_in_page</mat-icon
                  >
                  Genel Rapor
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>Genel Rapor</h5>
                    </div>
                    <div class="body">
                      <ul class="list-unstyled">
                        <li>
                          <h5>
                            Kalp atışı <span class="pull-right">85</span>
                          </h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-green width-per-45"
                              role="progressbar"
                              aria-valuenow="45"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>Tansiyon<span class="pull-right">93</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-orange width-per-38"
                              role="progressbar"
                              aria-valuenow="38"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>Şeker<span class="pull-right">55</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-cyan width-per-39"
                              role="progressbar"
                              aria-valuenow="39"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>
                            Hemoglobin<span class="pull-right">78%</span>
                          </h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-purple width-per-70"
                              role="progressbar"
                              aria-valuenow="70"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                  Hastanın Ziyaret Geçmişi
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>Hastanın Ziyaret Geçmişi</h5>
                    </div>
                    <div class="body">
                      <div class="table-responsive">
                        <table
                          class="table table-striped custom-table table-hover"
                        >
                          <thead>
                            <tr>
                              <th>Date</th>
                              <th>Doctor</th>
                              <th>Treatment</th>
                              <th>Charges($)</th>
                              <th>Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>11/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Check up</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>13/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>X-Ray</td>
                              <td>16$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>13/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Blood Test</td>
                              <td>24$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>14/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Admit</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>15/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Operation</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>18/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Discharge</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
            </div>
        </ng-template>
          <ng-template #secondContent>
            <div *ngIf="medicals" class="col-lg-12 col-md-12 col-sm-12">
              <div class="card project_widget">
                <div class="body">
                        <ul class="left-timeline">
                          <li *ngFor="let protocol of protocols">
                            <div *ngIf="!protocol.isOpen;else openProtocol">
                              <time class="left-time" datetime="2017-11-04T18:30"><span class="hidden label l-bg-purple" style="color:white !important;">{{protocol.typeName}}</span>
                                <span class="large">{{protocol.dateOfCome | date}}</span></time>
                                <div class="left-icon"><img src="assets/images/user/user4.jpg" alt="">
                                </div>
                                <div class="left-label">
                                  <span class="d-flex justify-content-between">
                                    <span class="large"><span style="color:white !important;" class="label l-bg-orange"> {{protocol.departmentName}} </span><span style="color:white !important;" class="label l-bg-customblue">  Dr.{{protocol.doctorName}} {{protocol.doctorSurname}}</span>
                                    </span>
                                    <a class="pl-1" routerLink="/admin/working/working-processes/{{protocol.protocolNo}}" onClick="return false;">Protokol No: #{{protocol.protocolNo}}</a>
                                  </span>
                                  <div class="row clearfix">
                                    <div class="col-lg-12">
                                      <div class="m-t-5">
                                        <mat-accordion>
                                          <mat-expansion-panel>
                                            <mat-expansion-panel-header>
                                              <mat-panel-title style="justify-content: center">
                                                <p class="font-bold col-orange">
                                                  Hasta Notları
                                                </p>
                                              </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <div class="card" style="padding: 0px;margin-bottom: 0px !important;">
                                              <div class="body" style="padding: 0px !important;">
                                                <div class="row">
                                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                                                    <mat-form-field class="example-full-width" appearance="fill">
                                                      <mat-label>Not Türü Seçiniz</mat-label>
                                                      <mat-select #selectForNotes [(value)]="selectedNoteType">
                                                        <mat-option value="1">Muayene</mat-option>
                                                        <mat-option value="2">Test</mat-option>
                                                        <mat-option value="3" disabled>Test2</mat-option>
                                                      </mat-select>
                                                    </mat-form-field>
                                                  </div>
                                                </div>
                                                <div class="row">
                                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12" style="margin-bottom: 0px !important;">
                                                    <ng-container [ngSwitch]="selectForNotes.value">
                                                      <ng-container *ngSwitchCase="1">
                                                        <ng-container *ngTemplateOutlet="medicalContent"></ng-container>
                                                      </ng-container>
                                                      <ng-container *ngSwitchCase="2">
                                                        <ng-container *ngTemplateOutlet="testContent"></ng-container>
                                                      </ng-container>
                                                    </ng-container>
                                                    <ng-template #medicalContent>
                                                      <div *ngIf="medicals.length>0;else noMedicalNote">
                                                        <div *ngFor="let medical of medicals; let i = index" class="row">
                                                          <div style="width: 100%;" *ngIf="medical.protocolId==protocol.protocolNo;else noMedicalNote">
                                                              <div class="col-md-12 col-12">
                                                                <mat-card>
                                                                  <mat-card-content  [attr.id]="'Medical'+medical.id">
                                                                    <div class="col-md-12 col-12 b-r">
                                                                      <strong>Şikayet</strong>
                                                                      <br>
                                                                      <p class="text-muted">{{medical.sikayet}}</p>
                                                                    </div>
                                                                    <div class="col-md-12 col-12 b-r">
                                                                      <strong>Hikaye</strong>
                                                                      <br>
                                                                      <p class="text-muted">{{medical.hikaye}}</p>
                                                                    </div>
                                                                    <div class="col-md-12 col-12 b-r">
                                                                      <strong>ICD</strong>
                                                                      <br>
                                                                      <p class="text-muted">{{medical.icd}}</p>
                                                                    </div>
                                                                    <div class="col-md-12 col-12 b-r">
                                                                      <strong>Soygeçmiş</strong>
                                                                      <br>
                                                                      <p class="text-muted">{{medical.soygecmis}}</p>
                                                                    </div>
                                                                    <div class="col-md-12 col-12">
                                                                      <strong>Baş Boyun Tiroid</strong>
                                                                      <br>
                                                                      <p class="text-muted">{{medical.basBoyunTiroid}}</p>
                                                                    </div>
                                                                  </mat-card-content>
                                                                  <mat-divider></mat-divider>
                                                                  <mat-card-actions>
                                                                    <div fxLayout="row">
                                                                      <button mat-icon-button (click)="editNoteForMedical(medical,'edit')">
                                                                        <mat-icon class="col-blue">edit</mat-icon>
                                                                      </button>
                                                                      <button (click)="exportMedicalNote(medical.id)" mat-icon-button>
                                                                        <mat-icon>print</mat-icon>
                                                                      </button>
                                                                      <button (click)="deleteNoteForMedical(medical.id)" mat-icon-button>
                                                                        <mat-icon class="col-red">delete</mat-icon>
                                                                      </button>
                                                                      <span fxFlex></span>
                                                                      <strong>Oluşturulduğu tarih: {{medical.addedDate | date}}</strong>
                                                                    </div>
                                                                  </mat-card-actions>
                                                                </mat-card>
                                                              </div>
                                                            </div>
                                                          </div>
                                                      </div>
                                                      <ng-template #noMedicalNote>
                                                        <div class="alert alert-warning w-100">
                                                         Hastanın mevcut Muayene notu yok!
                                                         <strong><a (click)="addNoteForMedical(protocol)" class="alert-link">Eklemek için tıklayınız</a></strong>
                                                        </div>
                                                </ng-template>
                                                    </ng-template>
                                                    <ng-template #testContent><p>The fifthContent option content</p></ng-template>
                                                  </div>
                                                </div>
                                            </div>
                                          </div>
                                          </mat-expansion-panel>
                                        </mat-accordion>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                            <ng-template #openProtocol>
                              <time class="left-time" datetime="2017-11-04T18:30"><span class="hidden label l-bg-purple" style="color:white !important;">{{protocol.typeName}}</span>
                                <span class="large">{{protocol.dateOfCome | date}}</span></time>
                                <div class="left-icon"><img src="assets/images/user/user4.jpg" alt="">
                                </div>
                              <div class="left-label">
                                <span class="d-flex justify-content-between">
                                  <span class="large"><span style="color:white !important;" class="label l-bg-orange"> {{protocol.departmentName}} </span><span style="color:white !important;" class="label l-bg-customblue">  Dr.{{protocol.doctorName}} {{protocol.doctorSurname}}</span>
                                  </span>
                                  <a class="pl-1" routerLink="/admin/working/working-processes/{{protocol.protocolNo}}" onClick="return false;">Protokol No: #{{protocol.protocolNo}}</a>
                                </span>
                                <div class="row clearfix">
                                  <div class="col-lg-12">
                                    <div class="m-t-5">
                                      <mat-accordion>
                                        <mat-expansion-panel>
                                          <mat-expansion-panel-header>
                                            <mat-panel-title style="justify-content: center">
                                              <p class="font-bold col-teal">
                                                Hasta Notları
                                              </p>
                                            </mat-panel-title>
                                          </mat-expansion-panel-header>
                                          <div class="card">
                                            <div class="body">
                                              <div class="row">
                                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                                  <mat-form-field class="example-full-width" appearance="fill">
                                                    <mat-label>Not Türü Seçiniz</mat-label>
                                                    <mat-select #selectForNotes [(value)]="selectedNoteType">
                                                      <mat-option value="1">Muayene</mat-option>
                                                      <mat-option value="2">Test</mat-option>
                                                      <mat-option value="3" disabled>Test2</mat-option>
                                                    </mat-select>
                                                  </mat-form-field>
                                                </div>
                                              </div>
                                              <div class="row">
                                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                                  <ng-container [ngSwitch]="selectForNotes.value">
                                                    <ng-container *ngSwitchCase="1">
                                                      <ng-container *ngTemplateOutlet="medicalContent"></ng-container>
                                                    </ng-container>
                                                    <ng-container *ngSwitchCase="2">
                                                      <ng-container *ngTemplateOutlet="testContent"></ng-container>
                                                    </ng-container>
                                                  </ng-container>
                                                  <ng-template #medicalContent>
                                                    <div *ngIf="medicals.length>0;else noMedicalNoteOpen">
                                                      <div *ngFor="let medical of medicals; let i = index" class="row">
                                                        <div *ngIf="medical.protocolId==protocol.protocolNo;else noMedicalNoteOpen">
                                                            <div class="col-md-12 col-12">
                                                          <mat-card>
                                                            <mat-card-content>
                                                              <div class="col-md-12 col-12 b-r">
                                                                <strong>Şikayet</strong>
                                                                <br>
                                                                <p class="text-muted">{{medical.sikayet}}</p>
                                                              </div>
                                                              <div class="col-md-12 col-12 b-r">
                                                                <strong>Hikaye</strong>
                                                                <br>
                                                                <p class="text-muted">{{medical.hikaye}}</p>
                                                              </div>
                                                              <div class="col-md-12 col-12 b-r">
                                                                <strong>ICD</strong>
                                                                <br>
                                                                <p class="text-muted">{{medical.icd}}</p>
                                                              </div>
                                                              <div class="col-md-12 col-12 b-r">
                                                                <strong>Soygeçmiş</strong>
                                                                <br>
                                                                <p class="text-muted">{{medical.soygecmis}}</p>
                                                              </div>
                                                              <div class="col-md-12 col-12">
                                                                <strong>Baş Boyun Tiroid</strong>
                                                                <br>
                                                                <p class="text-muted">{{medical.basBoyunTiroid}}</p>
                                                              </div>
                                                            </mat-card-content>
                                                            <mat-divider></mat-divider>
                                                            <mat-card-actions>
                                                              <div fxLayout="row">
                                                                <button mat-icon-button (click)="editNoteForMedical(medical,'edit')">
                                                                  <mat-icon class="col-blue">edit</mat-icon>
                                                                </button>
                                                                <button (click)="exportMedicalNote(medical.id)" mat-icon-button>
                                                                  <mat-icon>print</mat-icon>
                                                                </button>
                                                                <button (click)="deleteNoteForMedical(medical.id)" mat-icon-button>
                                                                  <mat-icon class="col-red">delete</mat-icon>
                                                                </button>
                                                                <span fxFlex></span>
                                                                <strong>Oluşturulduğu tarih: {{medical.addedDate | date}}</strong>
                                                              </div>
                                                            </mat-card-actions>
                                                          </mat-card>
                                                        </div>
                                                      </div>
                                                    </div>
                                                    </div>
                                                    <ng-template #noMedicalNoteOpen>
                                                      <div class="alert alert-warning w-100">
                                                       Hastanın mevcut Muayene notu yok!
                                                       <strong><a (click)="addNoteForMedical(protocol)" class="alert-link">Eklemek için tıklayınız</a></strong>
                                                      </div>
                                              </ng-template>
                                                  </ng-template>
                                                  <ng-template #testContent><p>The fifthContent option content</p></ng-template>
                                                </div>
                                              </div>
                                          </div>
                                        </div>
                                        </mat-expansion-panel>
                                      </mat-accordion>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
          </ng-template>
          <ng-template #thirdContent>
            <div class="card">
            <mat-tab-group>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                  Randevu Zaman Çizelgesi
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="body">
                      <section id="cd-timeline" class="cd-container" *ngIf="appointments">
                        <div *ngFor="let appointment of appointments" class="cd-timeline-block">
                          <div class="cd-timeline-img cd-location">
                            <img src="assets/images/user/user5.jpg" alt="User">
                          </div>
                          <!-- cd-timeline-img -->
                          <div class="cd-timeline-content">
                            <h2 class="timelineLabelColor">
                              <strong>Dr.{{appointment.doctorName}} {{appointment.doctorSurname}}</strong> {{appointment.typeName}} işlemi</h2>
                            <p>{{appointment.departmentName}} bölümünde {{appointment.time}}</p>
                            <span class="cd-date">{{appointment.date}}</span>
                          </div>
                          <!-- cd-timeline-content -->
                        </div>
                      </section>
                      <!-- cd-timeline -->
                    </div>
                  </div>
                </div>
              </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon mr-2">description</mat-icon>
                Randevu Listesi
              </ng-template>
              <div class="row" style="margin-left: 0;margin-right: 0;">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="card">
                    <div class="body">
                      <div class="table-responsive" *ngIf="dataSource">
                        <div class="materialTableHeader" style="min-width: 565px;">
                          <div class="row" style="margin-left: 0;margin-right: 0;">
                            <div class="col-9">
                              <ul class="header-buttons-left ml-0">
                                <li class="dropdown">
                                  <h2>
                                    <strong>Randevuları</strong>
                                  </h2>
                                </li>
                                <li class="dropdown m-l-20">
                                  <label for="search-input"
                                    ><i class="material-icons search-icon"
                                      >search</i
                                    ></label
                                  >
                                  <input
                                        placeholder="Arama"
                                        type="text"
                                        [(ngModel)]="filterValue"
                                        (keyup)="applyFilter($event.target.value)"
                                        class="browser-default search-field"
                                        aria-label="Search box"
                                      />
                                </li>
                              </ul>
                            </div>
                            <div class="col-3">
                              <ul class="header-buttons">
                                <li>
                                  <div class="icon-button-demo">
                                    <button
                                      mat-mini-fab
                                      color="primary"
                                      (click)="refreshForAppointments()"
                                    >
                                      <mat-icon class="col-white">refresh</mat-icon>
                                    </button>
                                  </div>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                        <mat-table
                          #table
                          [dataSource]="dataSource"
                          matSort
                          class="mat-cell"
                        >
                          <!-- ID Column -->
                          <ng-container matColumnDef="appointmentNo">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Id</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">{{ row.appointmentNo }}</mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="patientName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Hasta Ad</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.patientName }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="patientSurname">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Soyad</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.patientSurname }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="departmentName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Bölüm</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.departmentName }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="doctorName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Doktor Ad</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.doctorName }}</mat-cell
                            >
                          </ng-container>

                          <ng-container matColumnDef="doctorSurname">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Soyad</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.doctorSurname }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="time">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Saat</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.time }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="typeName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Protokol Tip</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.typeName }}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="phoneNumber">
                            <mat-header-cell *matHeaderCellDef mat-sort-header
                              >Telefon</mat-header-cell
                            >
                            <mat-cell *matCellDef="let row">
                              {{ row.phoneNumber}}</mat-cell
                            >
                          </ng-container>
                          <ng-container matColumnDef="patientHasArrive">
                            <mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              [ngClass]="'tbl-col-width-per-8'"
                              >Durum
                            </mat-header-cell>
                            <mat-cell
                              *matCellDef="let row"
                              [ngClass]="'tbl-col-width-per-8'"
                            >
                              <ng-container *ngIf="row.patientHasArrive == true; else elseTemplate">
                                <!-- <div color="accent" class="btn-tbl-check">
                                <mat-icon aria-label="Ok" class="col-white">check</mat-icon>
                              </div> -->
                              <button [disabled]="true" mat-icon-button color="accent" class="btn-tbl-check">
                                <mat-icon aria-label="Ok" class="col-white">check</mat-icon>
                              </button>
                              </ng-container>
                              <ng-template #elseTemplate><button [disabled]="true" mat-icon-button color="accent" class="btn-tbl-close">
                                <mat-icon aria-label="Ok" class="col-white">close</mat-icon>
                              </button></ng-template>
                            </mat-cell>
                          </ng-container>
                          <!-- actions -->
                <ng-container matColumnDef="actions">
                  <mat-header-cell *matHeaderCellDef class="pr-0"
                    >Eylemler</mat-header-cell
                  >
                  <mat-cell *matCellDef="let row; let i = index" class="pr-0">
                    <button mat-icon-button [matMenuTriggerFor]="menu2">
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu2="matMenu">
                      <button mat-menu-item *ngIf="!row.patientName==null" [matMenuTriggerFor]="protocolProcesses">
                        <mat-icon>group</mat-icon>
                        <span>Protokol İşlemleri</span>
                      </button>
                      <button mat-menu-item [matMenuTriggerFor]="appointmentProcesses">
                        <mat-icon>face</mat-icon>
                        <span>Hasta İşlemleri</span>
                      </button>
                    </mat-menu>
                    <mat-menu #protocolProcesses="matMenu">
                      <button mat-menu-item
                      (click)="$event.stopPropagation()"
                      (click)="addProtocolForPatient(row)">
                        <mat-icon>add</mat-icon>
                        <span>Ekle</span>
                      </button>
                    </mat-menu>
                    <mat-menu #appointmentProcesses="matMenu">
                      <!-- <button mat-menu-item *ngIf="!(row.patientName==null&&row.protocolId==0);else newAppointment"
                      (click)="editCall(row)">
                        <mat-icon>edit</mat-icon>
                        <span>Düzenle</span>
                      </button>
                      <ng-template #newAppointment>
                        <button mat-menu-item
                        (click)="$event.stopPropagation()"
                        (click)="editCall(row)">
                          <mat-icon>add</mat-icon>
                          <span>Yeni Randevu</span>
                        </button>
                      </ng-template>
                      <button mat-menu-item
                      (click)="$event.stopPropagation()"
                      (click)="deleteItem(i, row)">
                        <mat-icon>delete</mat-icon>
                        <span>Sil</span>
                      </button> -->
                    </mat-menu>
                  </mat-cell>
                </ng-container>
                          <mat-header-row
                            *matHeaderRowDef="displayedColumns"
                          ></mat-header-row>
                          <mat-row
                            *matRowDef="let row; columns: displayedColumns"
                          >
                          </mat-row>
                        </mat-table>
                        <mat-paginator
                          #paginator
                          [pageIndex]="0"
                          [pageSize]="4"
                        >
                        </mat-paginator>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
          </ng-template>
          <ng-template #fourthContent><p>The fourthContent option content</p></ng-template>
          <ng-template #fifthContent>
            <div class="row" style="margin-left: 0;margin-right: 0;">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                  <div class="body">
                    <div class="table-responsive" *ngIf="dataSourceForCollections">
                      <div class="materialTableHeader" style="min-width: 565px;">
                        <div class="row" style="margin-left: 0;margin-right: 0;">
                          <div class="col-12">
                            <ul class="header-buttons-left ml-0">
                              <li class="dropdown">
                                <h2>
                                  <strong>Ödemeleri</strong>
                                </h2>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                      <mat-table
                        #table
                        [dataSource]="dataSourceForCollections"
                        matSort
                        class="mat-cell"
                      >
                        <!-- ID Column -->
                        <ng-container matColumnDef="collectorId">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Id</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">{{ row.collectorId }}</mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="protocolId">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Protokol No</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">
                            {{ row.protocolId }}</mat-cell
                          >
                        </ng-container>
                        <ng-container matColumnDef="paymentType">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Ödeme Tipi</mat-header-cell
                          >
                          <mat-cell [ngSwitch]="row.paymentType" *matCellDef="let row">
                           <div *ngSwitchCase="1">Nakit Ödeme</div>
                           <div *ngSwitchCase="2">Kredi Kartı</div>
                            </mat-cell
                          >
                        </ng-container>
                        <ng-container matColumnDef="price">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Ödenecek</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">
                            {{ row.price }}</mat-cell
                          >
                        </ng-container>
                        <ng-container matColumnDef="discount">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >İndirim</mat-header-cell
                          >
                          <mat-cell [ngSwitch]="row.discount" *matCellDef="let row">
                            <div *ngSwitchCase="true">Evet</div>
                            <div *ngSwitchCase="false">Hayır</div>
                            </mat-cell
                          >
                        </ng-container>

                        <ng-container matColumnDef="paymentValue">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Ödenen</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">
                            {{ row.paymentValue }}</mat-cell
                          >
                        </ng-container>
                        <ng-container matColumnDef="discountValue">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >İndirim Tutarı</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">
                            {{ row.discountValue }}</mat-cell
                          >
                        </ng-container>
                        <ng-container matColumnDef="addedDate">
                          <mat-header-cell *matHeaderCellDef mat-sort-header
                            >Tarih</mat-header-cell
                          >
                          <mat-cell *matCellDef="let row">
                            {{ row.addedDate | date: "MM/dd/yyyy" }}</mat-cell
                          >
                        </ng-container>
                        <!-- actions -->
              <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef class="pr-0"
                  >Eylemler</mat-header-cell
                >
                <mat-cell *matCellDef="let row; let i = index" class="pr-0">
                  <button
                      mat-icon-button
                      color="accent"
                      class="btn-tbl-description"
                      (click)="$event.stopPropagation()"
                    >
                      <mat-icon aria-label="Detail" class="col-white"
                        >description</mat-icon
                      >
                    </button>
                </mat-cell>
              </ng-container>
                        <mat-header-row
                          *matHeaderRowDef="displayedColumnsForCollections"
                        ></mat-header-row>
                        <mat-row
                          *matRowDef="let row; columns: displayedColumnsForCollections"
                        >
                        </mat-row>
                      </mat-table>
                      <mat-paginator
                        #paginatorForCollections
                        [pageIndex]="0"
                        [pageSize]="4"
                      >
                      </mat-paginator>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
      </div>
      <ng-template #clickToAddNoteTrue>
        <div class="col-lg-12 col-md-12">
          <ng-container [ngSwitch]="select.selectedOptions.selected[0]?.value">
            <ng-container *ngSwitchCase="2.1">
              <ng-container *ngTemplateOutlet="secondSubContent"></ng-container>
            </ng-container>
          </ng-container>
          <ng-template #secondSubContent>
            <div *ngIf="medicals.length;else noMedicals" class="row">
              <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12">
                <div class="card">
                  <div class="body">
                        <div class="row">
                          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                            <mat-form-field class="example-full-width" appearance="outline">
                              <mat-label>Not Tipi Seçiniz</mat-label>
                              <mat-select #selectForNoteAdd [(ngModel)]="selectedNoteTypeForAdd" (selectionChange)="onOptionsSelectedForm(selectForNoteAdd.value)">
                                <mat-option value="1">Muayene</mat-option>
                                <mat-option value="2">Test</mat-option>
                                <mat-option value="3" disabled>Test2</mat-option>
                                <mat-option *ngFor="let form of dynamicFormArray" [value]="form.name">{{form.name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                            <mat-form-field class="example-full-width" appearance="outline">
                              <mat-label>Hasta gelişi seçiniz</mat-label>
                                <mat-select
                                #selectAppointmentForNoteAdd
                                [(ngModel)]="selectionForAppointment"
                                [disabled]="action==='edit'"
                                (selectionChange)="onOptionsSelected(selectAppointmentForNoteAdd.value)"
                                required
                              >
                                <mat-option
                                  *ngFor="let appointment of appointments"
                                  [value]="appointment.appointmentNo"
                                >
                                  {{ appointment.date | date }} tarihli,{{appointment.typeName}} tipi
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                            <ng-container [ngSwitch]="selectForNoteAdd.value">
                              <ng-container *ngSwitchCase="1">
                                <ng-container *ngTemplateOutlet="addMedical"></ng-container>
                              </ng-container>
                              <ng-container *ngSwitchCase="2">
                                <ng-container *ngTemplateOutlet="addTest"></ng-container>
                              </ng-container>
                              <div *ngFor="let form of dynamicFormArray" >
                              <ng-container *ngSwitchCase="form.name">
                                {{dynamicFormGroup.value | json}}
                                    <form class="m-2 row" [formGroup]="dynamicFormGroup" (ngSubmit)="onSubmitDynamicForm()">
                                <ng-container *ngFor="let control of form.fields">
                                  <ng-container [ngSwitch]="control.type">
                                    <ng-container *ngSwitchCase="'input'">
                                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                                      <mat-form-field class="example-full-width" appearance="outline">
                                        <mat-label>{{control.label}}</mat-label>
                                        <input matInput [formControlName]="control.formControlName">
                                      </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'select'">
                                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                                        <mat-form-field class="example-full-width" appearance="outline">
                                          <mat-label>{{control.label}}</mat-label>
                                          <mat-select [formControlName]="control.formControlName">
                                            <mat-option *ngFor="let option of control.values" [value]="option.value">{{option.value}}</mat-option>
                                          </mat-select>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'radio'">
                                      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                                        <label class="pr-5" *ngFor="let option of control.values">
                                          <input [formControlName]="control.formControlName" [value]="option.value" type="radio" name="{{control.formControlName}}">{{option.value}}
                                        </label>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'date'">
                                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                                        <mat-form-field class="example-full-width" appearance="outline">
                                          <mat-label>{{control.label}}</mat-label>
                                          <input matInput [matDatepicker]="picker3" [formControlName]="control.formControlName">
                                          <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                          <mat-datepicker #picker3></mat-datepicker>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'textarea'">
                                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                                        <mat-form-field class="example-full-width" appearance="outline">
                                          <mat-label>{{control.label}}</mat-label>
                                          <textarea matInput [formControlName]="control.formControlName"></textarea>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                  </ng-container>
                                </ng-container>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                    <button
                                      class="mr-3"
                                      [disabled]="!((selectionForAppointment)&&(selectedNoteTypeForAdd))"
                                      mat-raised-button
                                      color="primary"
                                    >
                                      Kaydet
                                    </button>
                                    <button
                                    class="mr-3"
                                    type="reset"
                                    [disabled]="!(selectionForAppointment&&selectedNoteTypeForAdd)"
                                      mat-raised-button
                                      color="accent"
                                    >
                                      Temizle
                                    </button>
                                    <button (click)="backToNote()" type="button" mat-button>İptal</button>
                                  </div>
                                </div>
                              </form>
                              </ng-container>
                            </div>
                            </ng-container>
                            <ng-template #addMedical>
                                <div class="row">
                                  <div class="col-md-12 col-12">
                                    <form class="m-4" [formGroup]="medicalForm" (ngSubmit)="onSubmit()">
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Şikayet</mat-label>
                                            <textarea matInput formControlName="sikayet"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Hikaye</mat-label>
                                            <textarea matInput formControlName="hikaye"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Soygeçmiş</mat-label>
                                            <textarea matInput formControlName="soygecmis"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>ICD</mat-label>
                                            <textarea matInput formControlName="icd"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Baş Boyun Tiroid</mat-label>
                                            <textarea matInput formControlName="basBoyunTiroid"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Notlar</mat-label>
                                            <textarea matInput formControlName="notlar"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Durum</mat-label>
                                            <textarea matInput formControlName="durum"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Notlar</mat-label>
                                            <textarea matInput formControlName="notlar"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                          <button
                                            class="mr-3"
                                            [disabled]="!((medicalForm.valid)&&(selectionForAppointment)&&(selectedNoteTypeForAdd))"
                                            mat-raised-button
                                            color="primary"
                                          >
                                            Kaydet
                                          </button>
                                          <button
                                          class="mr-3"
                                          type="reset"
                                          [disabled]="!(medicalForm.value&&selectionForAppointment&&selectedNoteTypeForAdd)"
                                            mat-raised-button
                                            color="accent"
                                          >
                                            Temizle
                                          </button>
                                          <button (click)="backToNote()" type="button" mat-button>İptal</button>
                                        </div>
                                      </div>
                                    </form>
                                  </div>
                                </div>
                            </ng-template>
                            <ng-template #addTest><p>Test Form</p></ng-template>
                          </div>
                        </div>
                      </div>
                    </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
                <div *ngFor="let medical of medicals" class="card">
                  <div class="row clearfix" *ngFor="let protocol of protocols">
                    <div class="col-lg-12" *ngIf="medical.protocolId==protocol.protocolNo">
                      <div class="m-t-5">
                        <mat-accordion>
                          <mat-expansion-panel>
                            <mat-expansion-panel-header>
                              <mat-panel-title style="justify-content: center">
                                <p *ngIf="protocol.isOpen" class="font-bold col-teal">
                                  {{protocol.dateOfCome | date}} tarihli {{protocol.typeName}} notu
                                </p>
                                <p *ngIf="!protocol.isOpen" class="font-bold col-orange">
                                  {{protocol.dateOfCome | date}} tarihli {{protocol.typeName}} notu
                                </p>
                              </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="card" style="padding: 0px;">
                              <div class="body" style="padding: 0px;">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                                    <mat-form-field class="example-full-width" appearance="fill">
                                      <mat-label>Not Türü Seçiniz</mat-label>
                                      <mat-select #selectForNotes [(value)]="selectedNoteType">
                                        <mat-option value="1">Muayene</mat-option>
                                        <mat-option value="2">Test</mat-option>
                                        <mat-option value="3" disabled>Test2</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                    <ng-container [ngSwitch]="selectForNotes.value">
                                      <ng-container *ngSwitchCase="1">
                                        <ng-container *ngTemplateOutlet="medicalContent"></ng-container>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="2">
                                        <ng-container *ngTemplateOutlet="testContent"></ng-container>
                                      </ng-container>
                                    </ng-container>
                                    <ng-template #medicalContent>
                                      <div>
                                        <div class="row">
                                          <div class="col-md-12 col-12">
                                            <mat-card>
                                              <mat-card-content>
                                                <div class="col-md-12 col-12 b-r">
                                                  <strong>Şikayet</strong>
                                                  <br>
                                                  <p class="text-muted">{{medical.sikayet}}</p>
                                                </div>
                                                <div class="col-md-12 col-12 b-r">
                                                  <strong>Hikaye</strong>
                                                  <br>
                                                  <p class="text-muted">{{medical.hikaye}}</p>
                                                </div>
                                                <div class="col-md-12 col-12 b-r">
                                                  <strong>ICD</strong>
                                                  <br>
                                                  <p class="text-muted">{{medical.icd}}</p>
                                                </div>
                                                <div class="col-md-12 col-12 b-r">
                                                  <strong>Soygeçmiş</strong>
                                                  <br>
                                                  <p class="text-muted">{{medical.soygecmis}}</p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>Baş Boyun Tiroid</strong>
                                                  <br>
                                                  <p class="text-muted">{{medical.basBoyunTiroid}}</p>
                                                </div>
                                              </mat-card-content>
                                              <mat-divider></mat-divider>
                                              <mat-card-actions>
                                                <div fxLayout="row">
                                                  <button (click)="editNoteForMedical(medical,'paste')" mat-raised-button color="accent"><mat-icon>arrow_back</mat-icon> Anamnez</button>
                                                  <button (click)="exportMedicalNote(medical.id)" mat-icon-button>
                                                    <mat-icon>print</mat-icon>
                                                  </button>
                                                  <button (click)="deleteNoteForMedical(medical.id)" mat-icon-button>
                                                    <mat-icon class="col-red">delete</mat-icon>
                                                  </button>
                                                  <span fxFlex></span>
                                                </div>
                                              </mat-card-actions>
                                            </mat-card>
                                          </div>
                                        </div>
                                      </div>
                                    </ng-template>
                                    <ng-template #testContent><p>The fifthContent option content</p></ng-template>
                                  </div>
                                </div>
                            </div>
                          </div>
                          </mat-expansion-panel>
                        </mat-accordion>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <ng-template #noMedicals>
            <div class="row">
              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                <div class="card">
                  <div class="header">
            <h2>Hastanın ilk notu</h2>
          </div>
                  <div class="body">
                        <div class="row">
                          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                            <mat-form-field class="example-full-width" appearance="outline">
                              <mat-label>Not Tipi Seçiniz</mat-label>
                              <mat-select #selectForNoteAdd [(value)]="selectedNoteTypeForAdd">
                                <mat-option value="1">Muayene</mat-option>
                                <mat-option value="2">Test</mat-option>
                                <mat-option value="3" disabled>Test2</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                            <mat-form-field class="example-full-width" appearance="outline">
                              <mat-label>Hasta gelişi seçiniz</mat-label>
                                <mat-select
                                #selectAppointmentForNoteAdd
                                [(ngModel)]="selectionForAppointment"
                                (selectionChange)="onOptionsSelected(selectAppointmentForNoteAdd.value)"
                                required
                              >
                                <mat-option
                                  *ngFor="let appointment of appointments"
                                  [value]="appointment.appointmentNo"
                                >
                                  {{ appointment.date | date }} tarihli,{{appointment.typeName}} tipi
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                            <ng-container [ngSwitch]="selectForNoteAdd.value">
                              <ng-container *ngSwitchCase="1">
                                <ng-container *ngTemplateOutlet="addMedical"></ng-container>
                              </ng-container>
                              <ng-container *ngSwitchCase="2">
                                <ng-container *ngTemplateOutlet="addTest"></ng-container>
                              </ng-container>
                            </ng-container>
                            <ng-template #addMedical>
                                <div class="row">
                                  <div class="col-md-12 col-12">
                                    <form class="m-4" [formGroup]="medicalForm" (ngSubmit)="onSubmit()">
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Şikayet</mat-label>
                                            <textarea matInput formControlName="sikayet"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Hikaye</mat-label>
                                            <textarea matInput formControlName="hikaye"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Soygeçmiş</mat-label>
                                            <textarea matInput formControlName="soygecmis"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>ICD</mat-label>
                                            <textarea matInput formControlName="icd"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Baş Boyun Tiroid</mat-label>
                                            <textarea matInput formControlName="basBoyunTiroid"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Notlar</mat-label>
                                            <textarea matInput formControlName="notlar"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Durum</mat-label>
                                            <textarea matInput formControlName="durum"></textarea>
                                          </mat-form-field>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                                          <mat-form-field class="example-full-width mb-3">
                                            <mat-label>Notlar</mat-label>
                                            <textarea matInput formControlName="notlar"></textarea>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                                          <button
                                            class="mr-3"
                                            [disabled]="!((medicalForm.valid)&&(selectionForAppointment)&&(selectedNoteTypeForAdd))"
                                            mat-raised-button
                                            color="primary"
                                          >
                                            Kaydet
                                          </button>
                                          <button
                                          class="mr-3"
                                          type="reset"
                                          [disabled]="!(medicalForm.value&&selectionForAppointment&&selectedNoteTypeForAdd)"
                                            mat-raised-button
                                            color="accent"
                                          >
                                            Temizle
                                          </button>
                                          <button (click)="backToNote()" type="button" mat-button>İptal</button>
                                        </div>
                                      </div>
                                    </form>
                                  </div>
                                </div>
                            </ng-template>
                            <ng-template #addTest><p>Test Form</p></ng-template>
                          </div>
                        </div>
                      </div>
                    </div>
              </div>
            </div>
          </ng-template>

          </ng-template>
      </div>
      </ng-template>
    </div>
    <div class="fab-container">
      <div class="fab fab-icon-holder">
        <i class="fas fa-user-cog"></i>
      </div>

      <ul class="fab-options">
        <li routerLink="edit-patient/{{ patient.id }}">
          <span class="fab-label">Düzenle</span>
          <div class="fab-icon-holder">
            <i class="fas fa-user-edit"></i>
          </div>
        </li>
        <li (click)="addProtocolForPatient()">
          <span class="fab-label">Yeni Protokol</span>
          <div class="fab-icon-holder">
            <i class="fas fa-file-medical"></i>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>
