<section *ngIf="patient" class="content">
  <div class="container-fluid">
    <div class="block-header">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <ul class="breadcrumb breadcrumb-style">
            <li class="breadcrumb-item">
              <h4 class="page-title">
                {{ patient.name | uppercase }} {{ patient.surName | uppercase }}
              </h4>
            </li>
            <li class="breadcrumb-item bcrumb-1">
              <a routerLink="/admin/dashboard/main">
                <i class="fas fa-home"></i> {{ "Homepage" | translate }}</a
              >
            </li>
            <li class="breadcrumb-item bcrumb-2">
              <a routerLink="/admin/patients/all-patients">{{
                "Patients" | translate
              }}</a>
            </li>
            <li class="breadcrumb-item active">
              {{ patient.name | uppercase }} {{ patient.surName | uppercase }}
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="header" style="padding-bottom: 0px; padding-top: 0px">
            <h2>{{ "MedicalAlerts" | translate }}</h2>
          </div>
          <div class="body" style="padding-bottom: 0px; width: 100%">
            <div
              *ngIf="checkClaim('GetMedicalAlertsQuery')"
              class="row clearfix"
            >
              <div
                *ngIf="checkClaim('CreateMedicalAlertCommand')"
                class="col-xs-6 col-sm-6 col-md-4 col-lg-3"
              >
                <button
                  style="width: 100%"
                  (click)="addNote()"
                  mat-flat-button
                  color="primary"
                >
                  {{ "AddMedicalAlert" | translate }} <mat-icon>edit</mat-icon>
                </button>
              </div>
              <div
                *ngFor="let medicalAlert of medicalAlerts; let i = index"
                class="col-xs-6 col-sm-6 col-md-4 col-lg-3"
              >
                <button
                  style="width: 100%"
                  (click)="editNote(medicalAlert)"
                  mat-flat-button
                  color="warn"
                  matTooltip="{{medicalAlert.note}}"  matTooltipClass="tooltip-orange"
                >
                  {{ medicalAlert.note.slice(0, 20) }}...<mat-icon
                    >remove_red_eye</mat-icon
                  >
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row clearfix">
      <div [hidden]="clickToAddNote" class="col-lg-3 col-md-3">
        <div class="card">
          <div class="body">
            <mat-selection-list
              (selectionChange)="sideBarSelectionChange($event)"
              #select
              [multiple]="false"
            >
              <mat-list-option [selected]="true" value="1">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <div style="display: flex; align-items: center">
                    <mat-icon matListAvatar>person</mat-icon>
                    <div style="display: flex; flex-direction: column">
                      <div>
                        <h6 matLine>{{ "Informations" | translate }}</h6>
                      </div>
                    </div>
                  </div>
                  <div></div>
                </div>
              </mat-list-option>
              <!-- Burada menü claims sorgularını yap -->
              <div *ngFor="let item of menuItems">
                <mat-list-option
                  *ngIf="checkClaim(item.claim)"
                  [value]="item.id"
                  [disableRipple]="true"
                >
                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                    "
                  >
                    <div style="display: flex; align-items: center">
                      <mat-icon matListAvatar>{{ item.icon }}</mat-icon>
                      <div style="display: flex; flex-direction: column">
                        <div>
                          <h6 matLine>{{ item.name }}</h6>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-list-option>
                <mat-list-option
                  style="padding-left: 5px; height: 40px !important"
                  *ngFor="let subItem of getSubItems(item)"
                  [value]="subItem.id"
                  [disableRipple]="true"
                >
                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                    "
                  >
                    <div style="display: flex; align-items: center">
                      <mat-icon style="height: 30px !important" matListAvatar
                        >subdirectory_arrow_right {{ subItem.icon }}</mat-icon
                      >
                      <div style="display: flex; flex-direction: column">
                        <div style="padding-left: 25px">
                          <h6 matLine>{{ subItem.name }}</h6>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-list-option>
              </div>
            </mat-selection-list>
          </div>
        </div>
      </div>
      <div
        *ngIf="!clickToAddNote; else clickToAddNoteTrue"
        class="col-lg-9 col-md-9"
      >
        <ng-container [ngSwitch]="select.selectedOptions.selected[0]?.value">
          <ng-container *ngSwitchCase="1">
            <ng-container *ngTemplateOutlet="firstContent"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="secondContent"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="thirdContent"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="fourthContent"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="5">
            <ng-container *ngTemplateOutlet="fifthContent"></ng-container>
          </ng-container>
        </ng-container>
        <ng-template #firstContent>
          <div class="card">
            <mat-tab-group>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                  {{ "ContactInformations" | translate }}
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="body">
                      <div class="tab-pane body active" id="about">
                        <div class="row">
                          <div class="col-6">
                            <small class="text-muted"
                              >{{ "PhoneNumber" | translate }}:
                            </small>
                            <p>{{ patient.phoneNumber }}</p>
                            <hr />
                            <small class="text-muted"
                              >{{ "City" | translate }}:
                            </small>
                            <p>{{ patient.city }}</p>
                            <hr />
                            <small class="text-muted"
                              >{{ "Address" | translate }}:
                            </small>
                            <p>{{ patient.address }}</p>
                            <hr />
                            <small class="text-muted"
                              >{{ "Email" | translate }}:
                            </small>
                            <p>{{ patient.eMail }}</p>
                          </div>
                          <div class="col-6">
                            <small class="text-muted"
                              >{{ "Country" | translate }}:
                            </small>
                            <p>{{ patient.country }}</p>
                            <hr />
                            <small class="text-muted"
                              >{{ "Region" | translate }}:
                            </small>
                            <p>{{ patient.region }}</p>
                            <hr />
                            <small class="text-muted"
                              >{{ "Nationality" | translate }}:
                            </small>
                            <p>{{ patient.nationality }}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">description</mat-icon>
                  {{ "AboutPatient" | translate }}
                </ng-template>
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="body">
                      <div class="row">
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "BirthDate" | translate }}</strong>
                          <br />

                          <p class="text-muted">
                            {{ patient.birthDate | date: "MM/dd/yyyy" }}
                          </p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "Gender" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.gender == true;
                              else elseTemplateGender
                            "
                            class="text-muted"
                          >
                            {{ "Male" | translate }}
                          </p>
                          <ng-template #elseTemplateGender>
                            <p class="text-muted">{{ "Female" | translate }}</p>
                          </ng-template>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>{{ "IdentityNumber" | translate }}</strong>
                          <br />
                          <p class="text-muted">
                            {{ patient.identityNumber }}
                          </p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "BloodGroup" | translate }}</strong>
                          <br />
                          <p class="text-muted">{{ patient.bloodGroup }}</p>
                        </div>
                      </div>
                      <hr />
                      <div class="row">
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "MotherName" | translate }}</strong>
                          <br />
                          <p class="text-muted">{{ patient.motherName }}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "FatherName" | translate }}</strong>
                          <br />
                          <p class="text-muted">{{ patient.fatherName }}</p>
                        </div>

                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "Job" | translate }}</strong>
                          <br />
                          <p class="text-muted">{{ patient.job }}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>{{ "MaritalStatus" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.maritalStatus == true;
                              else elseTemplateMarital
                            "
                            class="text-muted"
                          >
                            {{ "Married" | translate }}
                          </p>
                          <ng-template #elseTemplateMarital>
                            <p class="text-muted">{{ "Single" | translate }}</p>
                          </ng-template>
                        </div>
                      </div>
                      <hr />
                      <div class="row text-center">
                        <div class="col-md-6 col-12 b-r">
                          <strong>{{ "GdprConfirm" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.gdprConfirm == true;
                              else elseTemplateGdpr
                            "
                            class="text-muted"
                          >
                            {{ "Yes" | translate }}
                          </p>
                          <ng-template #elseTemplateGdpr>
                            <p class="text-muted">{{ "No" | translate }}</p>
                          </ng-template>
                        </div>
                        <div class="col-md-6 col-12 b-r">
                          <strong>{{ "SmsConfirm" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.smsConfirm == true;
                              else elseTemplateSms
                            "
                            class="text-muted"
                          >
                            {{ "Yes" | translate }}
                          </p>
                          <ng-template #elseTemplateSms>
                            <p class="text-muted">{{ "No" | translate }}</p>
                          </ng-template>
                        </div>
                      </div>
                      <br />
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">edit</mat-icon>
                  {{ "NotesAndAddictions" | translate }}
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>{{ "NotesAndAddictions" | translate }}</h5>
                    </div>
                    <div class="body">
                      <p *ngIf="patient.note; else noNote">
                        {{ patient.note }}
                      </p>
                      <ng-template #noNote
                        ><div class="alert alert-danger">
                          {{ "PatientDontHaveNote" | translate }}
                          <a (click)="addNotePatient()" style="color: blue">{{
                            "ClickForAdd" | translate
                          }}</a>
                        </div></ng-template
                      >
                      <hr />
                      <div class="row text-center">
                        <div class="col-md-4 col-8 b-r">
                          <strong>{{ "UsingSmoke" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.usingSmoke == true;
                              else elseTemplateSmoke
                            "
                            class="text-muted"
                          >
                            {{ "Yes" | translate }}
                          </p>
                          <ng-template #elseTemplateSmoke>
                            <p class="text-muted">{{ "No" | translate }}</p>
                          </ng-template>
                        </div>
                        <div class="col-md-4 col-8 b-r">
                          <strong>{{ "UsingAlcohol" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.usingAlcohol == true;
                              else elseTemplateAlcohol
                            "
                            class="text-muted"
                          >
                            {{ "Yes" | translate }}
                          </p>
                          <ng-template #elseTemplateAlcohol>
                            <p class="text-muted">{{ "No" | translate }}</p>
                          </ng-template>
                        </div>
                        <div class="col-md-4 col-8 b-r">
                          <strong>{{ "IsTrobule" | translate }}</strong>
                          <br />
                          <p
                            *ngIf="
                              patient.isTrobule == true;
                              else elseTemplateSmoke
                            "
                            class="text-muted"
                          >
                            {{ "Yes" | translate }}
                          </p>
                          <ng-template #elseTemplateSmoke>
                            <p class="text-muted">{{ "No" | translate }}</p>
                          </ng-template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2"
                    >find_in_page</mat-icon
                  >
                  {{ "GeneralReport" | translate }}
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>{{ "GeneralReport" | translate }}</h5>
                    </div>
                    <div class="body">
                      <ul class="list-unstyled">
                        <li>
                          <h5>Kalp atışı <span class="pull-right">85</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-green width-per-45"
                              role="progressbar"
                              aria-valuenow="45"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>Tansiyon<span class="pull-right">93</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-orange width-per-38"
                              role="progressbar"
                              aria-valuenow="38"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>Şeker<span class="pull-right">55</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-cyan width-per-39"
                              role="progressbar"
                              aria-valuenow="39"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                        <li>
                          <h5>Hemoglobin<span class="pull-right">78%</span></h5>
                          <div class="progress skill-progress m-b-20">
                            <div
                              class="progress-bar l-bg-purple width-per-70"
                              role="progressbar"
                              aria-valuenow="70"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                  Hastanın Ziyaret Geçmişi
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="header">
                      <h5>Hastanın Ziyaret Geçmişi</h5>
                    </div>
                    <div class="body">
                      <div class="table-responsive">
                        <table
                          class="table table-striped custom-table table-hover"
                        >
                          <thead>
                            <tr>
                              <th>Date</th>
                              <th>Doctor</th>
                              <th>Treatment</th>
                              <th>Charges($)</th>
                              <th>Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>11/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Check up</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>13/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>X-Ray</td>
                              <td>16$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>13/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Blood Test</td>
                              <td>24$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>14/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Admit</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>15/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Operation</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                            <tr>
                              <td>18/05/2017</td>
                              <td>Dr.Rajesh</td>
                              <td>Discharge</td>
                              <td>14$</td>
                              <td>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">mode_edit</i>
                                </button>
                                <button class="btn tblActnBtn">
                                  <i class="material-icons">delete</i>
                                </button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </ng-template>
        <ng-template #secondContent>
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="card project_widget">
              <div class="body">
                <ul
                  class="left-timeline"
                  *ngIf="protocols && protocols.length > 0; else noProtocols"
                >
                  <li *ngFor="let protocol of protocols">
                    <div *ngIf="!protocol.isOpen; else openProtocol">
                      <time class="left-time" datetime="2017-11-04T18:30"
                        ><span
                          class="hidden label l-bg-purple"
                          style="color: white !important"
                          >{{ protocol.typeName }}</span
                        >
                        <span class="large">{{
                          protocol.dateOfCome | date
                        }}</span></time
                      >
                      <div class="left-icon">
                        <img src="assets/images/user/user4.jpg" alt="" />
                      </div>
                      <div class="left-label">
                        <span class="d-flex justify-content-between">
                          <span class="large"
                            ><span
                              style="color: white !important"
                              class="label l-bg-orange"
                            >
                              {{ protocol.departmentName }} </span
                            ><span
                              style="color: white !important"
                              class="label l-bg-customblue"
                            >
                              Dr.{{ protocol.doctorName }}
                              {{ protocol.doctorSurname }}</span
                            >
                          </span>
                          <a
                            class="pl-1"
                            routerLink="/admin/working/working-processes/{{
                              protocol.protocolNo
                            }}"
                            onClick="return false;"
                            >{{ "ProtocolNo" | translate }}: #{{
                              protocol.protocolNo
                            }}</a
                          >
                        </span>
                        <div class="row clearfix">
                          <div class="col-lg-12">
                            <div class="m-t-5">
                              <mat-accordion>
                                <mat-expansion-panel>
                                  <mat-expansion-panel-header>
                                    <mat-panel-title
                                      style="justify-content: center"
                                    >
                                      <p class="font-bold col-orange">
                                        {{ "PatientNotes" | translate }}
                                      </p>
                                    </mat-panel-title>
                                  </mat-expansion-panel-header>
                                  <div
                                    class="card"
                                    style="
                                      padding: 0px;
                                      margin-bottom: 0px !important;
                                    "
                                  >
                                    <div
                                      class="body"
                                      style="padding: 0px !important"
                                    >
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="fill"
                                          >
                                            <mat-label>{{
                                              "ChooseNoteType" | translate
                                            }}</mat-label>
                                            <mat-select
                                              (selectionChange)="
                                                onOptionsSelectedNote(
                                                  selectForNotes.value,
                                                  protocol.protocolNo
                                                )
                                              "
                                              #selectForNotes
                                              [(value)]="selectedNoteType"
                                            >
                                              <mat-option value="Muayene">{{
                                                "Medical" | translate
                                              }}</mat-option>
                                              <mat-option value="Test"
                                                >Test</mat-option
                                              >
                                              <mat-option value="Test2" disabled
                                                >Test2</mat-option
                                              >
                                              <mat-option
                                                *ngFor="
                                                  let dynamicForm of dynamicFormArray
                                                "
                                                [value]="dynamicForm.id"
                                                >{{
                                                  dynamicForm.name
                                                }}</mat-option
                                              >
                                            </mat-select>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12"
                                          style="margin-bottom: 0px !important"
                                        >
                                          <ng-container
                                            [ngSwitch]="selectForNotes.value"
                                          >
                                            <ng-container
                                              *ngSwitchCase="'Muayene'"
                                            >
                                              <ng-container
                                                *ngTemplateOutlet="
                                                  medicalContent
                                                "
                                              ></ng-container>
                                            </ng-container>
                                            <ng-container
                                              *ngSwitchCase="'Test'"
                                            >
                                              <ng-container
                                                *ngTemplateOutlet="testContent"
                                              ></ng-container>
                                            </ng-container>
                                            <div
                                              *ngFor="
                                                let form of dynamicFormArray
                                              "
                                            >
                                              <ng-container
                                                *ngSwitchCase="form.id"
                                              >
                                                <div
                                                  *ngIf="
                                                    dynamicTableDatas.length >
                                                      0 &&
                                                      dynamicTableControl(
                                                        dynamicTableDatas,
                                                        protocol,
                                                        form.id
                                                      );
                                                    else noDynamicData
                                                  "
                                                >
                                                  <div class="row">
                                                    <div style="width: 100%">
                                                      <div
                                                        class="col-md-12 col-12"
                                                      >
                                                        <mat-card>
                                                          <mat-card-content
                                                            [attr.id]="
                                                              'Dynamic' +
                                                              form.id
                                                            "
                                                          >
                                                            <div
                                                              *ngFor="
                                                                let data of dynamicTableDataControl(
                                                                  form.id
                                                                );
                                                                let i = index
                                                              "
                                                              class="col-md-12 col-12 b-r"
                                                            >
                                                              <strong>{{
                                                                data.fieldLabel
                                                              }}</strong>
                                                              <br />
                                                              <p
                                                                class="text-muted"
                                                              >
                                                                {{
                                                                  data.fieldValue
                                                                }}
                                                              </p>
                                                            </div>
                                                          </mat-card-content>
                                                          <mat-divider></mat-divider>
                                                          <mat-card-actions>
                                                            <div fxLayout="row">
                                                              <button
                                                                mat-icon-button
                                                                (click)="
                                                                  editNoteForDynamicData(
                                                                    dynamicTableDatas,
                                                                    'edit',
                                                                    form.id
                                                                  )
                                                                "
                                                              >
                                                                <mat-icon
                                                                  class="col-blue"
                                                                  >edit</mat-icon
                                                                >
                                                              </button>
                                                              <button
                                                                (click)="
                                                                  exportDynamicNote(
                                                                    form.id
                                                                  )
                                                                "
                                                                mat-icon-button
                                                              >
                                                                <mat-icon
                                                                  >print</mat-icon
                                                                >
                                                              </button>
                                                              <button
                                                                (click)="
                                                                  deleteNoteForDynamicData(
                                                                    dynamicTableDatas,
                                                                    form.id
                                                                  )
                                                                "
                                                                mat-icon-button
                                                              >
                                                                <mat-icon
                                                                  class="col-red"
                                                                  >delete</mat-icon
                                                                >
                                                              </button>
                                                              <span
                                                                fxFlex
                                                              ></span>
                                                            </div>
                                                          </mat-card-actions>
                                                        </mat-card>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <ng-template #noDynamicData>
                                                  <div
                                                    class="alert alert-warning w-100"
                                                  >
                                                    {{
                                                      "PatientDontHaveCurrentNote"
                                                        | translate
                                                    }}
                                                    <strong
                                                      ><a
                                                        (click)="
                                                          addNoteForMedical(
                                                            selectForNotes.value,
                                                            protocol.protocolNo
                                                          )
                                                        "
                                                        class="alert-link"
                                                        >{{
                                                          "ClickForAdd"
                                                            | translate
                                                        }}</a
                                                      ></strong
                                                    >
                                                  </div>
                                                </ng-template>
                                              </ng-container>
                                            </div>
                                          </ng-container>
                                          <ng-template #medicalContent>
                                            <div
                                              *ngIf="
                                                medicals.length > 0;
                                                else noMedicalNote
                                              "
                                            >
                                              <div
                                                *ngFor="
                                                  let medical of medicals;
                                                  let i = index
                                                "
                                                class="row"
                                              >
                                                <div
                                                  style="width: 100%"
                                                  *ngIf="
                                                    medical.protocolId ==
                                                      protocol.protocolNo;
                                                    else noMedicalNote
                                                  "
                                                >
                                                  <div class="col-md-12 col-12">
                                                    <mat-card>
                                                      <mat-card-content
                                                        [attr.id]="
                                                          'Medical' + medical.id
                                                        "
                                                      >
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Sikayet"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.sikayet
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Hikaye" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.hikaye }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Icd" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.icd }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "SoyGecmis"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.soygecmis
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "BasBoyunTiroid"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.basBoyunTiroid
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Notes" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.notlar }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "SolunumSistemi"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.solunumSistemi
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Kardiyo"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.kardiyo
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Extremiteler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.extremiteler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "KarinMuayene"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.karinMuayene
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "AnalGenital"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.analGenital
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Cilt" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.cilt }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "NorolojikMuayene"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.norolojikMuayene
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "GecirilenOperasnyonlar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.gecirilenOperasnyonlar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Alerjiler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.alerjiler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "KullanilanIlaclar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.kullanilanIlaclar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Bagimlilik"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.bagimlilik
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Uygulamalar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.uygulamalar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Oneriler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.oneriler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Tedavi" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.tedavi }}
                                                          </p>
                                                        </div>
                                                      </mat-card-content>
                                                      <mat-divider></mat-divider>
                                                      <mat-card-actions>
                                                        <div fxLayout="row">
                                                          <button
                                                            mat-icon-button
                                                            (click)="
                                                              editNoteForMedical(
                                                                medical,
                                                                'edit'
                                                              )
                                                            "
                                                          >
                                                            <mat-icon
                                                              class="col-blue"
                                                              >edit</mat-icon
                                                            >
                                                          </button>
                                                          <button
                                                            (click)="
                                                              exportMedicalNote(
                                                                medical.id
                                                              )
                                                            "
                                                            mat-icon-button
                                                          >
                                                            <mat-icon
                                                              >print</mat-icon
                                                            >
                                                          </button>
                                                          <button
                                                            (click)="
                                                              deleteNoteForMedical(
                                                                medical.id
                                                              )
                                                            "
                                                            mat-icon-button
                                                          >
                                                            <mat-icon
                                                              class="col-red"
                                                              >delete</mat-icon
                                                            >
                                                          </button>
                                                          <span fxFlex></span>
                                                          <strong
                                                            >{{
                                                              "AddedDate"
                                                                | translate
                                                            }}:
                                                            {{
                                                              medical.addedDate
                                                                | date
                                                            }}</strong
                                                          >
                                                        </div>
                                                      </mat-card-actions>
                                                    </mat-card>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                            <ng-template #noMedicalNote>
                                              <div
                                                class="alert alert-warning w-100"
                                              >
                                                {{
                                                  "PatientDontHaveCurrentNote"
                                                    | translate
                                                }}
                                                <strong
                                                  ><a
                                                    (click)="
                                                      addNoteForMedical(
                                                        selectForNotes.value,
                                                        protocol.protocolNo
                                                      )
                                                    "
                                                    class="alert-link"
                                                    >{{
                                                      "ClickForAdd" | translate
                                                    }}</a
                                                  ></strong
                                                >
                                              </div>
                                            </ng-template>
                                          </ng-template>
                                          <ng-template #testContent
                                            ><p>
                                              The fifthContent option content
                                            </p></ng-template
                                          >
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </mat-expansion-panel>
                              </mat-accordion>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <ng-template #openProtocol>
                      <time class="left-time" datetime="2017-11-04T18:30"
                        ><span
                          class="hidden label l-bg-purple"
                          style="color: white !important"
                          >{{ protocol.typeName }}</span
                        >
                        <span class="large">{{
                          protocol.dateOfCome | date
                        }}</span></time
                      >
                      <div class="left-icon">
                        <img src="assets/images/user/user4.jpg" alt="" />
                      </div>
                      <div class="left-label">
                        <span class="d-flex justify-content-between">
                          <span class="large"
                            ><span
                              style="color: white !important"
                              class="label l-bg-orange"
                            >
                              {{ protocol.departmentName }} </span
                            ><span
                              style="color: white !important"
                              class="label l-bg-customblue"
                            >
                              Dr.{{ protocol.doctorName }}
                              {{ protocol.doctorSurname }}</span
                            >
                          </span>
                          <a
                            class="pl-1"
                            routerLink="/admin/working/working-processes/{{
                              protocol.protocolNo
                            }}"
                            onClick="return false;"
                            >{{ "ProtocolNo" | translate }}: #{{
                              protocol.protocolNo
                            }}</a
                          >
                        </span>
                        <div class="row clearfix">
                          <div class="col-lg-12">
                            <div class="m-t-5">
                              <mat-accordion>
                                <mat-expansion-panel>
                                  <mat-expansion-panel-header>
                                    <mat-panel-title
                                      style="justify-content: center"
                                    >
                                      <p class="font-bold col-teal">
                                        {{ "PatientNotes" | translate }}
                                      </p>
                                    </mat-panel-title>
                                  </mat-expansion-panel-header>
                                  <div class="card">
                                    <div class="body">
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="fill"
                                          >
                                            <mat-label>{{
                                              "ChooseNoteType" | translate
                                            }}</mat-label>
                                            <mat-select
                                              (selectionChange)="
                                                onOptionsSelectedNote(
                                                  selectForNotes.value,
                                                  protocol.protocolNo
                                                )
                                              "
                                              #selectForNotes
                                              [(value)]="selectedNoteType"
                                            >
                                              <mat-option value="Muayene">{{
                                                "Medical" | translate
                                              }}</mat-option>
                                              <mat-option value="Test"
                                                >Test</mat-option
                                              >
                                              <mat-option value="Test2" disabled
                                                >Test2</mat-option
                                              >
                                              <mat-option
                                                *ngFor="
                                                  let dynamicForm of dynamicFormArray
                                                "
                                                [value]="dynamicForm.id"
                                                >{{
                                                  dynamicForm.name
                                                }}</mat-option
                                              >
                                            </mat-select>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12"
                                          style="margin-bottom: 0px !important"
                                        >
                                          <ng-container
                                            [ngSwitch]="selectForNotes.value"
                                          >
                                            <ng-container
                                              *ngSwitchCase="'Muayene'"
                                            >
                                              <ng-container
                                                *ngTemplateOutlet="
                                                  medicalContent
                                                "
                                              ></ng-container>
                                            </ng-container>
                                            <ng-container
                                              *ngSwitchCase="'Test'"
                                            >
                                              <ng-container
                                                *ngTemplateOutlet="testContent"
                                              ></ng-container>
                                            </ng-container>
                                            <div
                                              *ngFor="
                                                let form of dynamicFormArray
                                              "
                                            >
                                              <ng-container
                                                *ngSwitchCase="form.id"
                                              >
                                                <div
                                                  *ngIf="
                                                    dynamicTableDatas.length >
                                                      0 &&
                                                      dynamicTableControl(
                                                        dynamicTableDatas,
                                                        protocol,
                                                        form.id
                                                      );
                                                    else noDynamicData
                                                  "
                                                >
                                                  <div class="row">
                                                    <div style="width: 100%">
                                                      <div
                                                        class="col-md-12 col-12"
                                                      >
                                                        <mat-card>
                                                          <mat-card-content
                                                            [attr.id]="
                                                              'Dynamic' +
                                                              form.id
                                                            "
                                                          >
                                                            <div
                                                              *ngFor="
                                                                let data of dynamicTableDataControl(
                                                                  form.id
                                                                );
                                                                let i = index
                                                              "
                                                              class="col-md-12 col-12 b-r"
                                                            >
                                                              <strong>{{
                                                                data.fieldLabel
                                                              }}</strong>
                                                              <br />
                                                              <p
                                                                class="text-muted"
                                                              >
                                                                {{
                                                                  data.fieldValue
                                                                }}
                                                              </p>
                                                            </div>
                                                          </mat-card-content>
                                                          <mat-divider></mat-divider>
                                                          <mat-card-actions>
                                                            <div fxLayout="row">
                                                              <button
                                                                mat-icon-button
                                                                (click)="
                                                                  editNoteForDynamicData(
                                                                    dynamicTableDatas,
                                                                    'edit',
                                                                    form.id
                                                                  )
                                                                "
                                                              >
                                                                <mat-icon
                                                                  class="col-blue"
                                                                  >edit</mat-icon
                                                                >
                                                              </button>
                                                              <button
                                                                (click)="
                                                                  exportDynamicNote(
                                                                    form.id
                                                                  )
                                                                "
                                                                mat-icon-button
                                                              >
                                                                <mat-icon
                                                                  >print</mat-icon
                                                                >
                                                              </button>
                                                              <button
                                                                (click)="
                                                                  deleteNoteForDynamicData(
                                                                    dynamicTableDatas,
                                                                    form.id
                                                                  )
                                                                "
                                                                mat-icon-button
                                                              >
                                                                <mat-icon
                                                                  class="col-red"
                                                                  >delete</mat-icon
                                                                >
                                                              </button>
                                                              <span
                                                                fxFlex
                                                              ></span>
                                                            </div>
                                                          </mat-card-actions>
                                                        </mat-card>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <ng-template #noDynamicData>
                                                  <div
                                                    class="alert alert-warning w-100"
                                                  >
                                                    {{
                                                      "PatientDontHaveCurrentNote"
                                                        | translate
                                                    }}
                                                    <strong
                                                      ><a
                                                        (click)="
                                                          addNoteForMedical(
                                                            selectForNotes.value,
                                                            protocol.protocolNo
                                                          )
                                                        "
                                                        class="alert-link"
                                                        >{{
                                                          "ClickForAdd"
                                                            | translate
                                                        }}</a
                                                      ></strong
                                                    >
                                                  </div>
                                                </ng-template>
                                              </ng-container>
                                            </div>
                                          </ng-container>
                                          <ng-template #medicalContent>
                                            <div
                                              *ngIf="
                                                medicals.length > 0;
                                                else noMedicalNote
                                              "
                                            >
                                              <div
                                                *ngFor="
                                                  let medical of medicals;
                                                  let i = index
                                                "
                                                class="row"
                                              >
                                                <div
                                                  style="width: 100%"
                                                  *ngIf="
                                                    medical.protocolId ==
                                                      protocol.protocolNo;
                                                    else noMedicalNote
                                                  "
                                                >
                                                  <div class="col-md-12 col-12">
                                                    <mat-card>
                                                      <mat-card-content
                                                        [attr.id]="
                                                          'Medical' + medical.id
                                                        "
                                                      >
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Sikayet"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.sikayet
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Hikaye" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.hikaye }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "Icd" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.icd }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12 b-r"
                                                        >
                                                          <strong>{{
                                                            "SoyGecmis"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.soygecmis
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "BasBoyunTiroid"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.basBoyunTiroid
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Notes" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.notlar }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "SolunumSistemi"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.solunumSistemi
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Kardiyo"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.kardiyo
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Extremiteler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.extremiteler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "KarinMuayene"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.karinMuayene
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "AnalGenital"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.analGenital
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Cilt" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.cilt }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "NorolojikMuayene"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.norolojikMuayene
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "GecirilenOperasnyonlar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.gecirilenOperasnyonlar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Alerjiler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.alerjiler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "KullanilanIlaclar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.kullanilanIlaclar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Bagimlilik"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.bagimlilik
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Uygulamalar"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.uygulamalar
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Oneriler"
                                                              | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{
                                                              medical.oneriler
                                                            }}
                                                          </p>
                                                        </div>
                                                        <div
                                                          class="col-md-12 col-12"
                                                        >
                                                          <strong>{{
                                                            "Tedavi" | translate
                                                          }}</strong>
                                                          <br />
                                                          <p class="text-muted">
                                                            {{ medical.tedavi }}
                                                          </p>
                                                        </div>
                                                      </mat-card-content>
                                                      <mat-divider></mat-divider>
                                                      <mat-card-actions>
                                                        <div fxLayout="row">
                                                          <button
                                                            mat-icon-button
                                                            (click)="
                                                              editNoteForMedical(
                                                                medical,
                                                                'edit'
                                                              )
                                                            "
                                                          >
                                                            <mat-icon
                                                              class="col-blue"
                                                              >edit</mat-icon
                                                            >
                                                          </button>
                                                          <button
                                                            (click)="
                                                              exportMedicalNote(
                                                                medical.id
                                                              )
                                                            "
                                                            mat-icon-button
                                                          >
                                                            <mat-icon
                                                              >print</mat-icon
                                                            >
                                                          </button>
                                                          <button
                                                            (click)="
                                                              deleteNoteForMedical(
                                                                medical.id
                                                              )
                                                            "
                                                            mat-icon-button
                                                          >
                                                            <mat-icon
                                                              class="col-red"
                                                              >delete</mat-icon
                                                            >
                                                          </button>
                                                          <span fxFlex></span>
                                                          <strong
                                                            >{{
                                                              "AddedDate"
                                                                | translate
                                                            }}:
                                                            {{
                                                              medical.addedDate
                                                                | date
                                                            }}</strong
                                                          >
                                                        </div>
                                                      </mat-card-actions>
                                                    </mat-card>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                            <ng-template #noMedicalNote>
                                              <div
                                                class="alert alert-warning w-100"
                                              >
                                                {{
                                                  "PatientDontHaveCurrentNote"
                                                    | translate
                                                }}
                                                <strong
                                                  ><a
                                                    (click)="
                                                      addNoteForMedical(
                                                        selectForNotes.value,
                                                        protocol.protocolNo
                                                      )
                                                    "
                                                    class="alert-link"
                                                    >{{
                                                      "ClickForAdd" | translate
                                                    }}</a
                                                  ></strong
                                                >
                                              </div>
                                            </ng-template>
                                          </ng-template>
                                          <ng-template #testContent
                                            ><p>
                                              The fifthContent option content
                                            </p></ng-template
                                          >
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </mat-expansion-panel>
                              </mat-accordion>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                  </li>
                </ul>
                <ng-template #noProtocols>
                  <p class="alert alert-warning">
                    {{ "NoRecordsFound" | translate }}
                  </p>
                </ng-template>
              </div>
            </div>
          </div>
        </ng-template>
        <ng-template #thirdContent>
          <div class="card">
            <mat-tab-group>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">history</mat-icon>
                  {{ "TimeLineOfAppointments" | translate }}
                </ng-template>
                <br />
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="card project_widget">
                    <div class="body">
                      <section
                        id="cd-timeline"
                        class="cd-container"
                        *ngIf="appointments"
                      >
                        <div
                          *ngFor="let appointment of appointments"
                          class="cd-timeline-block"
                        >
                          <div class="cd-timeline-img cd-location">
                            <img
                              src="assets/images/user/user5.jpg"
                              alt="User"
                            />
                          </div>
                          <!-- cd-timeline-img -->
                          <div class="cd-timeline-content">
                            <h2 class="timelineLabelColor">
                              <strong
                                >Dr.{{ appointment.doctorName }}
                                {{ appointment.doctorSurname }}</strong
                              >
                              {{ appointment.typeName }} işlemi
                            </h2>
                            <p>
                              {{ appointment.departmentName }} bölümünde
                              {{ appointment.time }}
                            </p>
                            <span class="cd-date">{{ appointment.date }}</span>
                          </div>
                          <!-- cd-timeline-content -->
                        </div>
                      </section>
                      <!-- cd-timeline -->
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon mr-2">description</mat-icon>
                  {{ "AppointmentList" | translate }}
                </ng-template>
                <div class="row" style="margin-left: 0; margin-right: 0">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                      <div class="body">
                        <div class="table-responsive" *ngIf="dataSource">
                          <div
                            class="materialTableHeader"
                            style="min-width: 565px"
                          >
                            <div
                              class="row"
                              style="margin-left: 0; margin-right: 0"
                            >
                              <div class="col-9">
                                <ul class="header-buttons-left ml-0">
                                  <li class="dropdown">
                                    <h2>
                                      <strong>{{
                                        "Appointments" | translate
                                      }}</strong>
                                    </h2>
                                  </li>
                                  <li class="dropdown m-l-20">
                                    <label for="search-input"
                                      ><i class="material-icons search-icon"
                                        >search</i
                                      ></label
                                    >
                                    <input
                                      placeholder="{{ 'Filter' | translate }}"
                                      type="text"
                                      [(ngModel)]="filterValue"
                                      (keyup)="applyFilter($event.target.value)"
                                      class="browser-default search-field"
                                      aria-label="Search box"
                                    />
                                  </li>
                                </ul>
                              </div>
                              <div class="col-3">
                                <ul class="header-buttons">
                                  <li>
                                    <div class="icon-button-demo">
                                      <button
                                        mat-mini-fab
                                        color="primary"
                                        (click)="refreshForAppointments()"
                                      >
                                        <mat-icon class="col-white"
                                          >refresh</mat-icon
                                        >
                                      </button>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                          <mat-table
                            #table
                            [dataSource]="dataSource"
                            matSort
                            class="mat-cell"
                          >
                            <!-- ID Column -->
                            <ng-container matColumnDef="appointmentNo">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{ "ID" | translate }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">{{
                                row.appointmentNo
                              }}</mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="patientName">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{
                                  "PatientName" | translate
                                }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.patientName }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="patientSurname">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{
                                  "PatientSurName" | translate
                                }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.patientSurname }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="departmentName">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{
                                  "DepartmentName" | translate
                                }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.departmentName }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="doctorName">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{ "DoctorName" | translate }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.doctorName }}</mat-cell
                              >
                            </ng-container>

                            <ng-container matColumnDef="doctorSurname">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{
                                  "DoctorSurName" | translate
                                }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.doctorSurname }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="time">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{ "Time" | translate }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.time }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="typeName">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{ "TypeName" | translate }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.typeName }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="phoneNumber">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                >{{
                                  "PhoneNumber" | translate
                                }}</mat-header-cell
                              >
                              <mat-cell *matCellDef="let row">
                                {{ row.phoneNumber }}</mat-cell
                              >
                            </ng-container>
                            <ng-container matColumnDef="patientHasArrive">
                              <mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                                [ngClass]="'tbl-col-width-per-8'"
                                >{{ "Status" | translate }}
                              </mat-header-cell>
                              <mat-cell
                                *matCellDef="let row"
                                [ngClass]="'tbl-col-width-per-8'"
                              >
                                <ng-container
                                  *ngIf="
                                    row.patientHasArrive == true;
                                    else elseTemplate
                                  "
                                >
                                  <button
                                    [disabled]="true"
                                    mat-icon-button
                                    color="accent"
                                    class="btn-tbl-check"
                                  >
                                    <mat-icon aria-label="Ok" class="col-white"
                                      >check</mat-icon
                                    >
                                  </button>
                                </ng-container>
                                <ng-template #elseTemplate
                                  ><button
                                    [disabled]="true"
                                    mat-icon-button
                                    color="accent"
                                    class="btn-tbl-close"
                                  >
                                    <mat-icon aria-label="Ok" class="col-white"
                                      >close</mat-icon
                                    >
                                  </button></ng-template
                                >
                              </mat-cell>
                            </ng-container>
                            <!-- actions -->
                            <ng-container matColumnDef="actions">
                              <mat-header-cell *matHeaderCellDef class="pr-0">{{
                                "Actions" | translate
                              }}</mat-header-cell>
                              <mat-cell
                                *matCellDef="let row; let i = index"
                                class="pr-0"
                              >
                                <button
                                  mat-icon-button
                                  [matMenuTriggerFor]="menu2"
                                >
                                  <mat-icon>more_vert</mat-icon>
                                </button>
                                <mat-menu #menu2="matMenu">
                                  <button
                                    mat-menu-item
                                    *ngIf="!row.patientName == null"
                                    [matMenuTriggerFor]="protocolProcesses"
                                  >
                                    <mat-icon>group</mat-icon>
                                    <span>Protokol İşlemleri</span>
                                  </button>
                                  <button
                                    mat-menu-item
                                    [matMenuTriggerFor]="appointmentProcesses"
                                  >
                                    <mat-icon>face</mat-icon>
                                    <span>Hasta İşlemleri</span>
                                  </button>
                                </mat-menu>
                                <mat-menu #protocolProcesses="matMenu">
                                  <button
                                    mat-menu-item
                                    (click)="$event.stopPropagation()"
                                    (click)="addProtocolForPatient(row)"
                                  >
                                    <mat-icon>add</mat-icon>
                                    <span>Ekle</span>
                                  </button>
                                </mat-menu>
                                <mat-menu #appointmentProcesses="matMenu">
                                  <!-- <button mat-menu-item *ngIf="!(row.patientName==null&&row.protocolId==0);else newAppointment"
                      (click)="editCall(row)">
                        <mat-icon>edit</mat-icon>
                        <span>Düzenle</span>
                      </button>
                      <ng-template #newAppointment>
                        <button mat-menu-item
                        (click)="$event.stopPropagation()"
                        (click)="editCall(row)">
                          <mat-icon>add</mat-icon>
                          <span>Yeni Randevu</span>
                        </button>
                      </ng-template>
                      <button mat-menu-item
                      (click)="$event.stopPropagation()"
                      (click)="deleteItem(i, row)">
                        <mat-icon>delete</mat-icon>
                        <span>Sil</span>
                      </button> -->
                                </mat-menu>
                              </mat-cell>
                            </ng-container>
                            <mat-header-row
                              *matHeaderRowDef="displayedColumns"
                            ></mat-header-row>
                            <mat-row
                              *matRowDef="let row; columns: displayedColumns"
                            >
                            </mat-row>
                          </mat-table>
                          <div
                            class="no-results"
                            [style.display]="
                              dataSource.data.length == 0 ? '' : 'none'
                            "
                          >
                            <p class="alert alert-danger">
                              {{ "NoRecordsFound" | translate }}
                            </p>
                          </div>
                          <mat-paginator
                            #paginator
                            [pageIndex]="0"
                            [pageSize]="4"
                          >
                          </mat-paginator>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </ng-template>
        <ng-template #fourthContent>
          <div class="row" style="margin-left: 0; margin-right: 0">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <div class="card">
                <div class="body">
                  <div class="table-responsive" *ngIf="dataSourceForInvoices">
                    <div class="materialTableHeader" style="min-width: 565px">
                      <div class="row" style="margin-left: 0; margin-right: 0">
                        <div class="col-12">
                          <ul class="header-buttons-left ml-0">
                            <li class="dropdown">
                              <h2>
                                <strong>{{ "Invoices" | translate }}</strong>
                              </h2>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <mat-table
                      #table
                      [dataSource]="dataSourceForInvoices"
                      matSort
                      class="mat-cell"
                    >
                      <!-- ID Column -->
                      <ng-container matColumnDef="collectorId">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "ID" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">{{
                          row.collectorId
                        }}</mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="protocolId">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "ProtocolNo" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.protocolId }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="totalPrice">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "TotalPrice" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.totalPrice }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="paymentBillNo">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "PaymentBillNo" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.paymentBillNo }}</mat-cell
                        >
                      </ng-container>

                      <ng-container matColumnDef="discountValue">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "DiscountValue" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.discountValue }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="addedDate">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "AddedDate" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.addedDate | date: "MM/dd/yyyy" }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="addedBy">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "AddedBy" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.addedBy }}</mat-cell
                        >
                      </ng-container>
                      <!-- actions -->
                      <ng-container matColumnDef="actions">
                        <mat-header-cell *matHeaderCellDef class="pr-0">{{
                          "Actions" | translate
                        }}</mat-header-cell>
                        <mat-cell
                          *matCellDef="let row; let i = index"
                          class="pr-0"
                        >
                          <button
                            mat-icon-button
                            color="accent"
                            class="btn-tbl-description"
                            routerLink="/admin/invoices/all-invoices/detail-invoice/{{
                              row.invoiceId
                            }}"
                          >
                            <mat-icon aria-label="Detail" class="col-white"
                              >description</mat-icon
                            >
                          </button>
                        </mat-cell>
                      </ng-container>
                      <mat-header-row
                        *matHeaderRowDef="displayedColumnsForInvoices"
                      ></mat-header-row>
                      <mat-row
                        *matRowDef="
                          let row;
                          columns: displayedColumnsForInvoices
                        "
                      >
                      </mat-row>
                    </mat-table>
                    <div
                      class="no-results"
                      [style.display]="
                        dataSourceForInvoices.data.length == 0 ? '' : 'none'
                      "
                    >
                      <p class="alert alert-danger">
                        {{ "NoRecordsFound" | translate }}
                      </p>
                    </div>
                    <mat-paginator
                      #paginatorForInvoices
                      [pageIndex]="0"
                      [pageSize]="4"
                    >
                    </mat-paginator>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
        <ng-template #fifthContent>
          <div class="row" style="margin-left: 0; margin-right: 0">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <div class="card">
                <div class="body">
                  <div
                    class="table-responsive"
                    *ngIf="dataSourceForCollections"
                  >
                    <div class="materialTableHeader" style="min-width: 565px">
                      <div class="row" style="margin-left: 0; margin-right: 0">
                        <div class="col-12">
                          <ul class="header-buttons-left ml-0">
                            <li class="dropdown">
                              <h2>
                                <strong>{{ "Payments" | translate }}</strong>
                              </h2>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <mat-table
                      #table
                      [dataSource]="dataSourceForCollections"
                      matSort
                      class="mat-cell"
                    >
                      <!-- ID Column -->
                      <ng-container matColumnDef="collectorId">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "ID" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">{{
                          row.collectorId
                        }}</mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="protocolId">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "ProtocolNo" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.protocolId }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="paymentType">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "PaymentType" | translate
                        }}</mat-header-cell>
                        <mat-cell
                          [ngSwitch]="row.paymentType"
                          *matCellDef="let row"
                        >
                          <div *ngSwitchCase="1">{{ "Cash" | translate }}</div>
                          <div *ngSwitchCase="2">
                            {{ "CreditCard" | translate }}
                          </div>
                        </mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="price">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "Price" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.price }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="discount">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "Discount" | translate
                        }}</mat-header-cell>
                        <mat-cell
                          [ngSwitch]="row.discount"
                          *matCellDef="let row"
                        >
                          <div *ngSwitchCase="true">
                            {{ "Yes" | translate }}
                          </div>
                          <div *ngSwitchCase="false">
                            {{ "No" | translate }}
                          </div>
                        </mat-cell>
                      </ng-container>

                      <ng-container matColumnDef="paymentValue">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "PaymentValue" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.paymentValue }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="discountValue">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "DiscountValue" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.discountValue }}</mat-cell
                        >
                      </ng-container>
                      <ng-container matColumnDef="addedDate">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>{{
                          "AddedDate" | translate
                        }}</mat-header-cell>
                        <mat-cell *matCellDef="let row">
                          {{ row.addedDate | date: "MM/dd/yyyy" }}</mat-cell
                        >
                      </ng-container>
                      <!-- actions -->
                      <ng-container matColumnDef="actions">
                        <mat-header-cell *matHeaderCellDef class="pr-0">{{
                          "Actions" | translate
                        }}</mat-header-cell>
                        <mat-cell
                          *matCellDef="let row; let i = index"
                          class="pr-0"
                        >
                          <button
                            mat-icon-button
                            color="accent"
                            class="btn-tbl-description"
                            (click)="$event.stopPropagation()"
                          >
                            <mat-icon aria-label="Detail" class="col-white"
                              >description</mat-icon
                            >
                          </button>
                        </mat-cell>
                      </ng-container>
                      <mat-header-row
                        *matHeaderRowDef="displayedColumnsForCollections"
                      ></mat-header-row>
                      <mat-row
                        *matRowDef="
                          let row;
                          columns: displayedColumnsForCollections
                        "
                      >
                      </mat-row>
                    </mat-table>
                    <div
                      class="no-results"
                      [style.display]="
                        dataSourceForCollections.data.length == 0 ? '' : 'none'
                      "
                    >
                      <p class="alert alert-danger">
                        {{ "NoRecordsFound" | translate }}
                      </p>
                    </div>
                    <mat-paginator
                      #paginatorForCollections
                      [pageIndex]="0"
                      [pageSize]="4"
                    >
                    </mat-paginator>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </div>
      <ng-template #clickToAddNoteTrue>
        <div class="col-lg-12 col-md-12">
          <ng-container [ngSwitch]="select.selectedOptions.selected[0]?.value">
            <ng-container *ngSwitchCase="2.1">
              <ng-container *ngTemplateOutlet="secondSubContent"></ng-container>
            </ng-container>
          </ng-container>
          <ng-template #secondSubContent>
            <div
              *ngIf="dynamicTableDataFormControl(); else noNotes"
              class="row"
            >
              <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12">
                {{ action }}
                <div class="card">
                  <div class="body">
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                        <mat-form-field
                          class="example-full-width"
                          appearance="outline"
                        >
                          <mat-label>{{
                            "ChooseNoteType" | translate
                          }}</mat-label>
                          <mat-select
                            #selectForNoteAdd
                            [(ngModel)]="selectedNoteTypeForAdd"
                            (selectionChange)="
                              onOptionsSelectedForm(selectForNoteAdd.value)
                            "
                          >
                            <mat-option value="Muayene">{{
                              "Medical" | translate
                            }}</mat-option>
                            <mat-option value="Test">Test</mat-option>
                            <mat-option value="Test2" disabled
                              >Test2</mat-option
                            >
                            <mat-option
                              *ngFor="let form of dynamicFormArray"
                              [value]="form.id"
                              >{{ form.name }}</mat-option
                            >
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                        <mat-form-field
                          class="example-full-width"
                          appearance="outline"
                        >
                          <mat-label>{{
                            "ChoosePatientArrival" | translate
                          }}</mat-label>
                          <mat-select
                            #selectAppointmentForNoteAdd
                            [(ngModel)]="selectionForAppointment"
                            disabled
                            (selectionChange)="
                              onOptionsSelected(
                                selectAppointmentForNoteAdd.value
                              )
                            "
                            required
                          >
                            <mat-option
                              *ngFor="let appointment of appointments"
                              [value]="appointment.appointmentNo"
                            >
                              {{ appointment.date | date }} tarihli,{{
                                appointment.typeName
                              }}
                              tipli, {{ appointment.departmentName }} departmanı
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                        <ng-container [ngSwitch]="selectForNoteAdd.value">
                          <ng-container *ngSwitchCase="'Muayene'">
                            <ng-container
                              *ngTemplateOutlet="addMedical"
                            ></ng-container>
                          </ng-container>
                          <ng-container *ngSwitchCase="'Test'">
                            <ng-container
                              *ngTemplateOutlet="addTest"
                            ></ng-container>
                          </ng-container>
                          <div *ngFor="let form of dynamicFormArray">
                            <ng-container *ngSwitchCase="form.id">
                              {{ dynamicFormGroup.value | json }}
                              <form
                                class="m-2 row"
                                [formGroup]="dynamicFormGroup"
                                (ngSubmit)="onSubmitDynamicForm()"
                              >
                                <ng-container
                                  *ngFor="let control of form.fields"
                                >
                                  <ng-container [ngSwitch]="control.type">
                                    <ng-container *ngSwitchCase="'input'">
                                      <div
                                        class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                      >
                                        <mat-form-field
                                          class="example-full-width"
                                          appearance="outline"
                                        >
                                          <mat-label>{{
                                            control.label
                                          }}</mat-label>
                                          <input
                                            matInput
                                            [formControlName]="
                                              control.formControlName
                                            "
                                          />
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'select'">
                                      <div
                                        class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                      >
                                        <mat-form-field
                                          class="example-full-width"
                                          appearance="outline"
                                        >
                                          <mat-label>{{
                                            control.label
                                          }}</mat-label>
                                          <mat-select
                                            [formControlName]="
                                              control.formControlName
                                            "
                                          >
                                            <mat-option
                                              *ngFor="
                                                let option of control.values
                                              "
                                              [value]="option.value"
                                              >{{ option.value }}</mat-option
                                            >
                                          </mat-select>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'radio'">
                                      <div
                                        class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2"
                                      >
                                        <div class="m-b-20">
                                          <mat-label class="mr-3">{{
                                            control.label
                                          }}</mat-label>
                                          <mat-radio-group
                                            aria-label="Select gender"
                                            [formControlName]="
                                              control.formControlName
                                            "
                                          >
                                            <mat-radio-button
                                              *ngFor="
                                                let option of control.values
                                              "
                                              [value]="option.value"
                                              >{{
                                                option.value
                                              }}</mat-radio-button
                                            >
                                          </mat-radio-group>
                                        </div>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'date'">
                                      <div
                                        class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                      >
                                        <mat-form-field
                                          class="example-full-width"
                                          appearance="outline"
                                        >
                                          <mat-label>{{
                                            control.label
                                          }}</mat-label>
                                          <input
                                            matInput
                                            [matDatepicker]="picker3"
                                            [formControlName]="
                                              control.formControlName
                                            "
                                          />
                                          <mat-datepicker-toggle
                                            matSuffix
                                            [for]="picker3"
                                          ></mat-datepicker-toggle>
                                          <mat-datepicker
                                            #picker3
                                          ></mat-datepicker>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'textarea'">
                                      <div
                                        class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                      >
                                        <mat-form-field
                                          class="example-full-width"
                                          appearance="outline"
                                        >
                                          <mat-label>{{
                                            control.label
                                          }}</mat-label>
                                          <textarea
                                            matInput
                                            [formControlName]="
                                              control.formControlName
                                            "
                                          ></textarea>
                                        </mat-form-field>
                                      </div>
                                    </ng-container>
                                  </ng-container>
                                </ng-container>
                                <div
                                  *ngIf="
                                    protocolHaveOneNote() || action == 'edit';
                                    else protocolHaveNote
                                  "
                                  class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                >
                                  <button
                                    class="mr-3"
                                    [disabled]="
                                      !(
                                        selectionForAppointment &&
                                        selectedNoteTypeForAdd
                                      )
                                    "
                                    mat-raised-button
                                    color="primary"
                                  >
                                    {{ "Save" | translate }}
                                  </button>
                                  <button
                                    class="mr-3"
                                    type="reset"
                                    [disabled]="
                                      !(
                                        selectionForAppointment &&
                                        selectedNoteTypeForAdd
                                      )
                                    "
                                    mat-raised-button
                                    color="accent"
                                  >
                                    {{ "Clear" | translate }}
                                  </button>
                                  <button
                                    (click)="backToNote()"
                                    type="button"
                                    mat-button
                                  >
                                    {{ "Cancel" | translate }}
                                  </button>
                                </div>
                                <ng-template #protocolHaveNote>
                                  <div class="alert alert-danger w-100">
                                    {{ "MustOneNote" | translate }}!
                                    <strong
                                      ><a
                                        (click)="backToNote()"
                                        class="alert-link"
                                        >{{
                                          "ClickForBackToNotes" | translate
                                        }}</a
                                      ></strong
                                    >
                                  </div>
                                </ng-template>
                              </form>
                            </ng-container>
                          </div>
                        </ng-container>
                        <ng-template #addMedical>
                          <div class="row">
                            <div class="col-md-12 col-12">
                              <form
                                class="m-4"
                                [formGroup]="medicalForm"
                                (ngSubmit)="onSubmit()"
                              >
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Sikayet" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="sikayet"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Hikaye" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="hikaye"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Soygecmis" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="soygecmis"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Icd" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="icd"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "BasBoyunTiroid" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="basBoyunTiroid"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Notes" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="notlar"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "SolunumSistemi" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="solunumSistemi"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Kardiyo" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="kardiyo"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Extremiteler" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="extremiteler"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "KarinMuayene" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="karinMuayene"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "AnalGenital" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="analGenital"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Cilt" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="cilt"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "NorolojikMuayene" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="norolojikMuayene"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "GecirilenOperasnyonlar" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="gecirilenOperasnyonlar"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Alerjiler" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="alerjiler"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "KullanilanIlaclar" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="kullanilanIlaclar"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Bagimlilik" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="bagimlilik"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Uygulamalar" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="uygulamalar"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Oneriler" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="oneriler"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div
                                    class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                  >
                                    <mat-form-field
                                      class="example-full-width mb-3"
                                    >
                                      <mat-label>{{
                                        "Tedavi" | translate
                                      }}</mat-label>
                                      <textarea
                                        matInput
                                        formControlName="tedavi"
                                      ></textarea>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    *ngIf="
                                      protocolHaveOneMedicalNote();
                                      else protocolHaveMedicalNote
                                    "
                                    class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                  >
                                    <button
                                      class="mr-3"
                                      [disabled]="
                                        !(
                                          selectionForAppointment &&
                                          selectedNoteTypeForAdd
                                        )
                                      "
                                      mat-raised-button
                                      color="primary"
                                    >
                                      {{ "Save" | translate }}
                                    </button>
                                    <button
                                      class="mr-3"
                                      type="reset"
                                      [disabled]="
                                        !(
                                          selectionForAppointment &&
                                          selectedNoteTypeForAdd
                                        )
                                      "
                                      mat-raised-button
                                      color="accent"
                                    >
                                      {{ "Clear" | translate }}
                                    </button>
                                    <button
                                      (click)="backToNote()"
                                      type="button"
                                      mat-button
                                    >
                                      {{ "Cancel" | translate }}
                                    </button>
                                  </div>
                                  <ng-template #protocolHaveMedicalNote>
                                    <div class="alert alert-danger w-100">
                                      {{ "MustOneNote" | translate }}!
                                      <strong
                                        ><a
                                          (click)="backToNote()"
                                          class="alert-link"
                                          >{{
                                            "ClickForBackToNotes" | translate
                                          }}</a
                                        ></strong
                                      >
                                    </div>
                                  </ng-template>
                                </div>
                              </form>
                            </div>
                          </div>
                        </ng-template>
                        <ng-template #addTest><p>Test Form</p></ng-template>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
                <ng-container [ngSwitch]="selectForNoteAdd.value">
                  <ng-container *ngSwitchCase="'Muayene'">
                    <ng-container
                      *ngTemplateOutlet="medicalNotes"
                    ></ng-container>
                  </ng-container>
                  <ng-container *ngSwitchCase="'Test'">
                    <ng-container *ngTemplateOutlet="addTest"></ng-container>
                  </ng-container>
                  <div *ngFor="let form of dynamicFormArray">
                    <ng-container *ngSwitchCase="form.id">
                      <div
                        *ngFor="
                          let item of dynamicTableProtocolControl(form.id)
                        "
                        class="card"
                      >
                        <div
                          *ngFor="let protocol of protocols"
                          class="row clearfix"
                        >
                          <div
                            *ngIf="
                              dynamicTableDatas.length > 0 &&
                              dynamicTableControl(
                                dynamicTableDatas,
                                protocol,
                                form.id
                              )
                            "
                            class="col-lg-12"
                          >
                            <div class="m-t-5">
                              <mat-accordion>
                                <mat-expansion-panel>
                                  <mat-expansion-panel-header>
                                    <mat-panel-title
                                      style="justify-content: center"
                                    >
                                      <p
                                        *ngIf="protocol.isOpen"
                                        class="font-bold col-teal"
                                      >
                                        {{ protocol.dateOfCome | date }} tarihli
                                        {{ protocol.typeName }} notu
                                      </p>
                                      <p
                                        *ngIf="!protocol.isOpen"
                                        class="font-bold col-orange"
                                      >
                                        {{ protocol.dateOfCome | date }} tarihli
                                        {{ protocol.typeName }} notu
                                      </p>
                                    </mat-panel-title>
                                  </mat-expansion-panel-header>
                                  <div class="card" style="padding: 0px">
                                    <div class="body" style="padding: 0px">
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                        >
                                          <div>
                                            <div class="row">
                                              <div class="col-md-12 col-12">
                                                <mat-card>
                                                  <mat-card-content
                                                    [attr.id]="form.name"
                                                  >
                                                    <div
                                                      *ngFor="
                                                        let data of dynamicTableDataControl(
                                                          form.id
                                                        );
                                                        let i = index
                                                      "
                                                      class="col-md-12 col-12 b-r"
                                                    >
                                                      <strong>{{
                                                        data.fieldLabel
                                                      }}</strong>
                                                      <br />
                                                      <p class="text-muted">
                                                        {{ data.fieldValue }}
                                                      </p>
                                                    </div>
                                                  </mat-card-content>
                                                  <mat-divider></mat-divider>
                                                  <mat-card-actions>
                                                    <div fxLayout="row">
                                                      <button
                                                        (click)="
                                                          getNoteForDynamicData(
                                                            dynamicTableDatas
                                                          )
                                                        "
                                                        mat-raised-button
                                                        color="accent"
                                                      >
                                                        <mat-icon
                                                          >arrow_back</mat-icon
                                                        >
                                                        {{
                                                          "Export" | translate
                                                        }}
                                                      </button>
                                                      <button
                                                        (click)="
                                                          exportMedicalNote(
                                                            medical.id
                                                          )
                                                        "
                                                        mat-icon-button
                                                      >
                                                        <mat-icon
                                                          >print</mat-icon
                                                        >
                                                      </button>
                                                      <button
                                                        (click)="
                                                          deleteNoteForMedical(
                                                            medical.id
                                                          )
                                                        "
                                                        mat-icon-button
                                                      >
                                                        <mat-icon
                                                          class="col-red"
                                                          >delete</mat-icon
                                                        >
                                                      </button>
                                                      <span fxFlex></span>
                                                    </div>
                                                  </mat-card-actions>
                                                </mat-card>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </mat-expansion-panel>
                              </mat-accordion>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </ng-container>
                <ng-template #medicalNotes>
                  <div *ngFor="let medical of medicals" class="card">
                    <div
                      class="row clearfix"
                      *ngFor="let protocol of protocols"
                    >
                      <div
                        class="col-lg-12"
                        *ngIf="medical.protocolId == protocol.protocolNo"
                      >
                        <div class="m-t-5">
                          <mat-accordion>
                            <mat-expansion-panel>
                              <mat-expansion-panel-header>
                                <mat-panel-title
                                  style="justify-content: center"
                                >
                                  <p
                                    *ngIf="protocol.isOpen"
                                    class="font-bold col-teal"
                                  >
                                    {{ protocol.dateOfCome | date }} tarihli
                                    {{ protocol.typeName }} notu
                                  </p>
                                  <p
                                    *ngIf="!protocol.isOpen"
                                    class="font-bold col-orange"
                                  >
                                    {{ protocol.dateOfCome | date }} tarihli
                                    {{ protocol.typeName }} notu
                                  </p>
                                </mat-panel-title>
                              </mat-expansion-panel-header>
                              <div class="card" style="padding: 0px">
                                <div class="body" style="padding: 0px">
                                  <div class="row">
                                    <div
                                      class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                    >
                                      <div>
                                        <div class="row">
                                          <div class="col-md-12 col-12">
                                            <mat-card>
                                              <mat-card-content>
                                                <div
                                                  class="col-md-12 col-12 b-r"
                                                >
                                                  <strong>{{
                                                    "Sikayet" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.sikayet }}
                                                  </p>
                                                </div>
                                                <div
                                                  class="col-md-12 col-12 b-r"
                                                >
                                                  <strong>{{
                                                    "Hikaye" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.hikaye }}
                                                  </p>
                                                </div>
                                                <div
                                                  class="col-md-12 col-12 b-r"
                                                >
                                                  <strong>{{
                                                    "Icd" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.icd }}
                                                  </p>
                                                </div>
                                                <div
                                                  class="col-md-12 col-12 b-r"
                                                >
                                                  <strong>{{
                                                    "Soygecmis" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.soygecmis }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "BasBoyunTiroid" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.basBoyunTiroid }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Notes" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.notlar }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "SolunumSistemi" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.solunumSistemi }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Kardiyo" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.kardiyo }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Extremiteler" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.extremiteler }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "KarinMuayene" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.karinMuayene }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "AnalGenital" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.analGenital }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Cilt" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.cilt }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "NorolojikMuayene"
                                                      | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{
                                                      medical.norolojikMuayene
                                                    }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "GecirilenOperasnyonlar"
                                                      | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{
                                                      medical.gecirilenOperasnyonlar
                                                    }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Alerjiler" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.alerjiler }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "KullanilanIlaclar"
                                                      | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{
                                                      medical.kullanilanIlaclar
                                                    }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Bagimlilik" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.bagimlilik }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Uygulamalar" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.uygulamalar }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Oneriler" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.oneriler }}
                                                  </p>
                                                </div>
                                                <div class="col-md-12 col-12">
                                                  <strong>{{
                                                    "Tedavi" | translate
                                                  }}</strong>
                                                  <br />
                                                  <p class="text-muted">
                                                    {{ medical.tedavi }}
                                                  </p>
                                                </div>
                                              </mat-card-content>
                                              <mat-divider></mat-divider>
                                              <mat-card-actions>
                                                <div fxLayout="row">
                                                  <button
                                                    (click)="
                                                      getNoteForMedical(medical)
                                                    "
                                                    mat-raised-button
                                                    color="accent"
                                                  >
                                                    <mat-icon
                                                      >arrow_back</mat-icon
                                                    >
                                                    {{ "Export" | translate }}
                                                  </button>
                                                  <button
                                                    (click)="
                                                      exportMedicalNote(
                                                        medical.id
                                                      )
                                                    "
                                                    mat-icon-button
                                                  >
                                                    <mat-icon>print</mat-icon>
                                                  </button>
                                                  <button
                                                    (click)="
                                                      deleteNoteForMedical(
                                                        medical.id
                                                      )
                                                    "
                                                    mat-icon-button
                                                  >
                                                    <mat-icon class="col-red"
                                                      >delete</mat-icon
                                                    >
                                                  </button>
                                                  <span fxFlex></span>
                                                </div>
                                              </mat-card-actions>
                                            </mat-card>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </mat-expansion-panel>
                          </mat-accordion>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-template>
                <ng-template #addTest><p>Test Form</p></ng-template>
              </div>
            </div>
            <ng-template #noNotes>
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                  <div class="card">
                    <div class="body">
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                          <mat-form-field
                            class="example-full-width"
                            appearance="outline"
                          >
                            <mat-label>{{
                              "ChooseNoteType" | translate
                            }}</mat-label>
                            <mat-select
                              #selectForNoteAdd
                              [(ngModel)]="selectedNoteTypeForAdd"
                              (selectionChange)="
                                onOptionsSelectedForm(selectForNoteAdd.value)
                              "
                            >
                              <mat-option value="Muayene">{{
                                "Medical" | translate
                              }}</mat-option>
                              <mat-option value="Test">Test</mat-option>
                              <mat-option value="Test2" disabled
                                >Test2</mat-option
                              >
                              <mat-option
                                *ngFor="let form of dynamicFormArray"
                                [value]="form.id"
                                >{{ form.name }}</mat-option
                              >
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                          <mat-form-field
                            class="example-full-width"
                            appearance="outline"
                          >
                            <mat-label>{{
                              "ChoosePatientArrival" | translate
                            }}</mat-label>
                            <mat-select
                              disabled
                              #selectAppointmentForNoteAdd
                              [(ngModel)]="selectionForAppointment"
                              disabled
                              (selectionChange)="
                                onOptionsSelected(
                                  selectAppointmentForNoteAdd.value
                                )
                              "
                              required
                            >
                              <mat-option
                                *ngFor="let appointment of appointments"
                                [value]="appointment.appointmentNo"
                              >
                                {{ appointment.date | date }} tarihli,{{
                                  appointment.typeName
                                }}
                                tipli,
                                {{ appointment.departmentName }} departmanı
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row">
                        <div
                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                        >
                          <ng-container [ngSwitch]="selectForNoteAdd.value">
                            <ng-container *ngSwitchCase="'Muayene'">
                              <ng-container
                                *ngTemplateOutlet="addMedical"
                              ></ng-container>
                            </ng-container>
                            <ng-container *ngSwitchCase="'Test'">
                              <ng-container
                                *ngTemplateOutlet="addTest"
                              ></ng-container>
                            </ng-container>
                            <div *ngFor="let form of dynamicFormArray">
                              <ng-container *ngSwitchCase="form.id">
                                {{ dynamicFormGroup.value | json }}
                                <form
                                  class="m-2 row"
                                  [formGroup]="dynamicFormGroup"
                                  (ngSubmit)="onSubmitDynamicForm()"
                                >
                                  <ng-container
                                    *ngFor="let control of form.fields"
                                  >
                                    <ng-container [ngSwitch]="control.type">
                                      <ng-container *ngSwitchCase="'input'">
                                        <div
                                          class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="outline"
                                          >
                                            <mat-label>{{
                                              control.label
                                            }}</mat-label>
                                            <input
                                              matInput
                                              [formControlName]="
                                                control.formControlName
                                              "
                                            />
                                          </mat-form-field>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'select'">
                                        <div
                                          class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="outline"
                                          >
                                            <mat-label>{{
                                              control.label
                                            }}</mat-label>
                                            <mat-select
                                              [formControlName]="
                                                control.formControlName
                                              "
                                            >
                                              <mat-option
                                                *ngFor="
                                                  let option of control.values
                                                "
                                                [value]="option.value"
                                                >{{ option.value }}</mat-option
                                              >
                                            </mat-select>
                                          </mat-form-field>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'radio'">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2"
                                        >
                                          <div class="m-b-20">
                                            <mat-label class="mr-3">{{
                                              control.label
                                            }}</mat-label>
                                            <mat-radio-group
                                              aria-label="Select gender"
                                              [formControlName]="
                                                control.formControlName
                                              "
                                            >
                                              <mat-radio-button
                                                *ngFor="
                                                  let option of control.values
                                                "
                                                [value]="option.value"
                                                >{{
                                                  option.value
                                                }}</mat-radio-button
                                              >
                                            </mat-radio-group>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'date'">
                                        <div
                                          class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="outline"
                                          >
                                            <mat-label>{{
                                              control.label
                                            }}</mat-label>
                                            <input
                                              matInput
                                              [matDatepicker]="picker3"
                                              [formControlName]="
                                                control.formControlName
                                              "
                                            />
                                            <mat-datepicker-toggle
                                              matSuffix
                                              [for]="picker3"
                                            ></mat-datepicker-toggle>
                                            <mat-datepicker
                                              #picker3
                                            ></mat-datepicker>
                                          </mat-form-field>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'textarea'">
                                        <div
                                          class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2"
                                        >
                                          <mat-form-field
                                            class="example-full-width"
                                            appearance="outline"
                                          >
                                            <mat-label>{{
                                              control.label
                                            }}</mat-label>
                                            <textarea
                                              matInput
                                              [formControlName]="
                                                control.formControlName
                                              "
                                            ></textarea>
                                          </mat-form-field>
                                        </div>
                                      </ng-container>
                                    </ng-container>
                                  </ng-container>
                                  <div class="row">
                                    <div
                                      class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                    >
                                      <button
                                        class="mr-3"
                                        [disabled]="
                                          !(
                                            selectionForAppointment &&
                                            selectedNoteTypeForAdd
                                          )
                                        "
                                        mat-raised-button
                                        color="primary"
                                      >
                                        {{ "Save" | translate }}
                                      </button>
                                      <button
                                        class="mr-3"
                                        type="reset"
                                        [disabled]="
                                          !(
                                            selectionForAppointment &&
                                            selectedNoteTypeForAdd
                                          )
                                        "
                                        mat-raised-button
                                        color="accent"
                                      >
                                        {{ "Clear" | translate }}
                                      </button>
                                      <button
                                        (click)="backToNote()"
                                        type="button"
                                        mat-button
                                      >
                                        {{ "Cancel" | translate }}
                                      </button>
                                    </div>
                                  </div>
                                </form>
                              </ng-container>
                            </div>
                          </ng-container>
                          <ng-template #addMedical>
                            <div class="row">
                              <div class="col-md-12 col-12">
                                <form
                                  class="m-4"
                                  [formGroup]="medicalForm"
                                  (ngSubmit)="onSubmit()"
                                >
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Sikayet" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="sikayet"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Hikaye" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="hikaye"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Soygecmis" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="soygecmis"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Icd" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="icd"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "BasBoyunTiroid" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="basBoyunTiroid"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Notes" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="notlar"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "SolunumSistemi" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="solunumSistemi"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Kardiyo" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="kardiyo"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Extremiteler" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="extremiteler"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "KarinMuayene" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="karinMuayene"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "AnalGenital" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="analGenital"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Cilt" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="cilt"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "NorolojikMuayene" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="norolojikMuayene"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "GecirilenOperasnyonlar" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="gecirilenOperasnyonlar"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Alerjiler" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="alerjiler"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "KullanilanIlaclar" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="kullanilanIlaclar"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Bagimlilik" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="bagimlilik"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Uygulamalar" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="uygulamalar"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Oneriler" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="oneriler"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                    <div
                                      class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3"
                                    >
                                      <mat-form-field
                                        class="example-full-width mb-3"
                                      >
                                        <mat-label>{{
                                          "Tedavi" | translate
                                        }}</mat-label>
                                        <textarea
                                          matInput
                                          formControlName="tedavi"
                                        ></textarea>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div
                                      class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3"
                                    >
                                      <button
                                        class="mr-3"
                                        [disabled]="
                                          !(
                                            medicalForm.valid &&
                                            selectionForAppointment &&
                                            selectedNoteTypeForAdd
                                          )
                                        "
                                        mat-raised-button
                                        color="primary"
                                      >
                                        {{ "Save" | translate }}
                                      </button>
                                      <button
                                        class="mr-3"
                                        type="reset"
                                        [disabled]="
                                          !(
                                            medicalForm.value &&
                                            selectionForAppointment &&
                                            selectedNoteTypeForAdd
                                          )
                                        "
                                        mat-raised-button
                                        color="accent"
                                      >
                                        {{ "Clear" | translate }}
                                      </button>
                                      <button
                                        (click)="backToNote()"
                                        type="button"
                                        mat-button
                                      >
                                        {{ "Cancel" | translate }}
                                      </button>
                                    </div>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </ng-template>
                          <ng-template #addTest><p>Test Form</p></ng-template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ng-template>
        </div>
      </ng-template>
    </div>
    <div class="fab-container">
      <div class="fab fab-icon-holder">
        <i class="fas fa-user-cog"></i>
      </div>

      <ul class="fab-options">
        <li
          *ngIf="checkClaim('UpdatePatientDataCommand')"
          routerLink="edit-patient/{{ patient.id }}"
        >
          <span class="fab-label">{{ "Edit" | translate }}</span>
          <div class="fab-icon-holder">
            <i class="fas fa-user-edit"></i>
          </div>
        </li>
        <li
          *ngIf="checkClaim('CreateProtocolCommand')"
          (click)="protocolControl(patient)"
        >
          <span class="fab-label">{{ "NewProtocol" | translate }}</span>
          <div class="fab-icon-holder">
            <i class="fas fa-file-medical"></i>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>
